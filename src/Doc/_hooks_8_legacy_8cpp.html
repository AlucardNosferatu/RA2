<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: src/Ext/SWType/Hooks.Legacy.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ares</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_61edef5b85f25cd5be6bbdff5e99e478.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_de16222cf794c2cbeaf77d0392606035.html">Ext</a>      </li>
      <li class="navelem"><a class="el" href="dir_fdcbb5712a4c6dd9e296e1e92aa05590.html">SWType</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Hooks.Legacy.cpp File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_s_w_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_bullet_2_body_8h.html">../Bullet/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_building_2_body_8h.html">../Building/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_s_w_types_8h.html">../../Misc/SWTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_warhead_type_2_body_8h.html">../WarheadType/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_building_type_2_body_8h.html">../BuildingType/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_nuke_8h.html">../../Misc/SWTypes/Nuke.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_helpers_8_alex_8h.html">../../Utilities/Helpers.Alex.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_dominator_8h.html">../../Misc/SWTypes/Dominator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_lightning_storm_8h.html">../../Misc/SWTypes/LightningStorm.h</a>&quot;</code><br/>
<code>#include &lt;IonBlastClass.h&gt;</code><br/>
<code>#include &lt;ScenarioClass.h&gt;</code><br/>
<code>#include &lt;WarheadTypeClass.h&gt;</code><br/>
<code>#include &lt;BulletClass.h&gt;</code><br/>
<code>#include &lt;BulletTypeClass.h&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a3f2c9d77245e5526db865612a5749ef8">DEFINE_HOOK</a> (53B080, PsyDom_Fire, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#aecb51039e2bd5de1d1ca7627218c8c30">DEFINE_HOOK</a> (53C321, ScenarioClass_UpdateLighting_PsyDom, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a77da768a39d36af7fa76f179ce2706dc">DEFINE_HOOK</a> (53C2A6, ScenarioClass_UpdateLighting_LightningStorm, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a9e8cafda9ca1d91af324746fefac8596">DEFINE_HOOK</a> (53C3B1, ScenarioClass_UpdateLighting_Nuke, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a47dd69ec16d685cd9cf1bff1ab4e8a4b">DEFINE_HOOK</a> (53AF40, PsyDom_Update, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#aa6384561d281d3fdc4b41f6fe0d50e05">DEFINE_HOOK</a> (539EB0, LightningStorm_Start, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a6a71069abffd064c17ef5fbcef52af6c">DEFINE_HOOK</a> (53A6C0, LightningStorm_Update, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#acab57f7d36ecd61eedf587647d8fefb9">DEFINE_HOOK</a> (53A140, LightningStorm_Strike, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a93c7bcd6b7a271a5dd6f8a8149e5c4e1">DEFINE_HOOK</a> (53A300, LightningStorm_Strike2, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a4a8e2002b32a39a3533db62d92ca6569">DEFINE_HOOK</a> (48A59A, MapClass_SelectDamageAnimation_LightningWarhead, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a4da7fce6e53da9478b89f7614fd2ccea">DEFINE_HOOK</a> (44C9FF, BuildingClass_Missile_PsiWarn, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a382e154472373f16a8179adbbf6b3885">DEFINE_HOOK</a> (44CABA, BuildingClass_Missile_CreateBullet, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#ab9ad94c32bb058a2f04c805586a3130d">DEFINE_HOOK</a> (44CC8B, BuildingClass_Missile_NukeTakeOff, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a265017ab92da076e8acfbbfb065c2ba1">DEFINE_HOOK</a> (44CC9D, BuildingClass_Missile_NukeTakeOffB, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a81d6e6e7ee20f78b4ae420e5e7f28a73">DEFINE_HOOK</a> (46B371, BulletClass_NukeMaker, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a53158ad8fd6e9b780b5a11ecbbda195c">DEFINE_HOOK</a> (46B423, BulletClass_NukeMaker_PropagateSW, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#aca54f5d2ec52972b8fbb6e060c3a8312">DEFINE_HOOK</a> (467E59, BulletClass_Update_NukeBall, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a52cd61fb9292b77bf3852987ea9d4161">DEFINE_HOOK</a> (7187DA, TeleportLocomotionClass_Unwarp_PreventSelfCrush, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#aa5c0ccda560b054d0003b46c3042d4f4">DEFINE_HOOK</a> (7188F2, TeleportLocomotionClass_Unwarp_SinkJumpJets, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a833341f1fa1775a7d148be3d9b2ebe8f">DEFINE_HOOK</a> (446AAF, BuildingClass_Place_SkipFreeUnits, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_legacy_8cpp.html#a0d8f56cb3fcb1b80b9d1425bc58ef8fa">DEFINE_HOOK</a> (71AE85, TemporalClass_CanWarpTarget_PreventChronoBuilding, A)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3f2c9d77245e5526db865612a5749ef8"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a3f2c9d77245e5526db865612a5749ef8" args="(53B080, PsyDom_Fire, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53B080&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PsyDom_Fire&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                    {
        <span class="keywordflow">if</span>(SuperClass * pSuper = <a class="code" href="class_s_w___psychic_dominator.html#aa98a7373c9b416bb9f069220a596a2af">SW_PsychicDominator::CurrentPsyDom</a>) {
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSuper-&gt;Type);

                HouseClass* pFirer = PsyDom::Owner();
                CellStruct cell = PsyDom::Coords();

                CoordStruct coords;
                CellClass *pTarget = MapClass::Instance-&gt;GetCellAt(&amp;cell);
                pTarget-&gt;GetCoords(&amp;coords);
                
                <span class="comment">// blast!</span>
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ae579c0dd75f794c3e8609a42478d8ccd">Dominator_Ripple</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        IonBlastClass* pBlast = NULL;
                        GAME_ALLOC(IonBlastClass, pBlast, coords);
                        <span class="keywordflow">if</span>(pBlast) {
                                pBlast-&gt;DisableIonBeam = 1;
                        }
                }

                <span class="comment">// tell!</span>
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a59db7b4b7d4e8a199e1ed48b6b89236b">SW_RadarEvent</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        RadarEventClass::Create(RADAREVENT_SUPERWEAPONLAUNCHED, cell);
                }

                <span class="comment">// anim</span>
                AnimClass* pAnim = NULL;
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a0123e6e7d48b6e373a6b0800e362bca6">Dominator_SecondAnim</a>.<a class="code" href="class_customizable.html#a3dc2b0918c34c90837994b776f52139c">Get</a>()) {
                        CoordStruct animCoords = coords;
                        animCoords.Z += pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a61cdd53cf08963a69ac50a064cb1cba6">Dominator_SecondAnimHeight</a>;
                        GAME_ALLOC(AnimClass, pAnim, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a0123e6e7d48b6e373a6b0800e362bca6">Dominator_SecondAnim</a>, &amp;animCoords);
                        PsyDom::Anim(pAnim);
                }

                <span class="comment">// kill</span>
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a892c327800d0e183b03c4c002ee73106">SW_Damage</a> &gt; 0 &amp;&amp; pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3641f612552d25fd9aaa86982241475d">SW_Warhead</a>.<a class="code" href="class_customizable.html#a3dc2b0918c34c90837994b776f52139c">Get</a>()) {
                        MapClass::Instance-&gt;DamageArea(&amp;coords, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a892c327800d0e183b03c4c002ee73106">SW_Damage</a>, NULL, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3641f612552d25fd9aaa86982241475d">SW_Warhead</a>, <span class="keyword">true</span>, pFirer);
                }

                <span class="comment">// capture</span>
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a7ddf776dd88298529a8fbcfa89f1f6b3">Dominator_Capture</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        DynamicVectorClass&lt;FootClass*&gt; Minions;

                        <span class="keyword">auto</span> Dominate = [&amp;](ObjectClass* pObj) -&gt; <span class="keywordtype">bool</span> {
                                <span class="keywordflow">if</span>(TechnoClass* pTechno = generic_cast&lt;TechnoClass*&gt;(pObj)) {
                                        TechnoTypeClass* pType = pTechno-&gt;GetTechnoType();

                                        <span class="comment">// don&#39;t even try.</span>
                                        <span class="keywordflow">if</span>(pTechno-&gt;IsIronCurtained()) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// ignore BalloonHover and inair units.</span>
                                        <span class="keywordflow">if</span>(pType-&gt;BalloonHover || pTechno-&gt;IsInAir()) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// SW dependent stuff</span>
                                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a83b7da1f9c60a0c83012755802149397">IsHouseAffected</a>(pFirer, pTechno-&gt;Owner)) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a4d106d1e314357b53b740cff262c6061">IsTechnoAffected</a>(pTechno)) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// ignore mind-controlled</span>
                                        <span class="keywordflow">if</span>(pTechno-&gt;MindControlledBy &amp;&amp; !pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ab0e78ba9349669a50dc7c80ef6920bf1">Dominator_CaptureMindControlled</a>) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// ignore permanently mind-controlled</span>
                                        <span class="keywordflow">if</span>(pTechno-&gt;MindControlledByAUnit &amp;&amp; !pTechno-&gt;MindControlledBy
                                                &amp;&amp; !pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ac9d759f885729293f009fa30b1acace8">Dominator_CapturePermaMindControlled</a>) {
                                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// ignore ImmuneToPsionics, if wished</span>
                                        <span class="keywordflow">if</span>(pType-&gt;ImmuneToPsionics &amp;&amp; !pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a21b5c61259bb6006521d8446ffb96db2">Dominator_CaptureImmuneToPsionics</a>) {
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                        }

                                        <span class="comment">// free this unit</span>
                                        <span class="keywordflow">if</span>(pTechno-&gt;MindControlledBy) {
                                                pTechno-&gt;MindControlledBy-&gt;CaptureManager-&gt;FreeUnit(pTechno);
                                        }

                                        <span class="comment">// capture this unit, maybe permanently</span>
                                        pTechno-&gt;SetOwningHouse(pFirer);
                                        pTechno-&gt;MindControlledByAUnit = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aea05d930f0640b14093dfc51f453faae">Dominator_PermanentCapture</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>();

                                        <span class="comment">// remove old permanent mind control anim</span>
                                        <span class="keywordflow">if</span>(pTechno-&gt;MindControlRingAnim) {
                                                pTechno-&gt;MindControlRingAnim-&gt;UnInit();
                                                pTechno-&gt;MindControlRingAnim = NULL;
                                        }

                                        <span class="comment">// create a permanent capture anim</span>
                                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adc1570f4981eac918cf03455f717471a">Dominator_ControlAnim</a>.<a class="code" href="class_customizable.html#a3dc2b0918c34c90837994b776f52139c">Get</a>()) {
                                                CoordStruct animCoords;
                                                pTechno-&gt;GetCoords(&amp;animCoords);
                                                animCoords.Z += pType-&gt;MindControlRingOffset;
                                                GAME_ALLOC(AnimClass, pTechno-&gt;MindControlRingAnim, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adc1570f4981eac918cf03455f717471a">Dominator_ControlAnim</a>, &amp;animCoords);
                                                <span class="keywordflow">if</span>(pTechno-&gt;MindControlRingAnim) {
                                                        pTechno-&gt;MindControlRingAnim-&gt;SetOwnerObject(pTechno);
                                                }
                                        }

                                        <span class="comment">// add to the other newly captured minions.</span>
                                        <span class="keywordflow">if</span>(FootClass* pFoot = generic_cast&lt;FootClass*&gt;(pObj)) {
                                                Minions.AddItem(pFoot);
                                        }
                                }

                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        };

                        <span class="comment">// every techno in this area shall be one with Yuri.</span>
                        <span class="keywordflow">if</span>(<a class="code" href="class_helpers_1_1_alex_1_1_distinct_collector.html">Helpers::Alex::DistinctCollector&lt;ObjectClass*&gt;</a> *items = <span class="keyword">new</span> <a class="code" href="class_helpers_1_1_alex_1_1_distinct_collector.html">Helpers::Alex::DistinctCollector&lt;ObjectClass*&gt;</a>()) {
                                <a class="code" href="class_helpers_1_1_alex.html#ad69cd737926ecea72dc03760164c46bc">Helpers::Alex::forEachObjectInRange</a>(&amp;cell, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a7129c297fbbabd4f14ba5e9ffb904c7f">SW_WidthOrRange</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adeebf914a68e530c66f7db66811d0d3b">SW_Height</a>, items-&gt;getCollector());
                                items-&gt;forEach(Dominate);
                                <span class="keyword">delete</span> items;
                        }

                        <span class="comment">// the AI sends all new minions to hunt</span>
                        <span class="keywordflow">if</span>(!PsyDom::Owner()-&gt;ControlledByHuman()) {
                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;Minions.Count; ++i) {
                                        FootClass* pFoot = Minions.GetItem(i);
                                        pFoot-&gt;QueueMission(mission_Hunt, <span class="keyword">false</span>);
                                }
                        }
                }
                
                <span class="comment">// skip everything</span>
                <span class="keywordflow">return</span> 0x53B3EC;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d8f56cb3fcb1b80b9d1425bc58ef8fa"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a0d8f56cb3fcb1b80b9d1425bc58ef8fa" args="(71AE85, TemporalClass_CanWarpTarget_PreventChronoBuilding, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">71AE85&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TemporalClass_CanWarpTarget_PreventChronoBuilding&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="comment">// prevent warping buildings that are about to be chronoshifted.</span>
        <span class="comment">// if such building is attacked, it will be removed by the chronosphere</span>
        <span class="comment">// and it won&#39;t come back and the affected player can&#39;t be defeated.</span>
        GET(BuildingClass*, pBld, ESI);
        <span class="keywordflow">if</span>(<a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a>* pExt = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.Find(pBld)) {
                <span class="keywordflow">if</span>(pExt-&gt;AboutToChronoshift) {
                        <span class="keywordflow">return</span> 0x71AE93;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a833341f1fa1775a7d148be3d9b2ebe8f"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a833341f1fa1775a7d148be3d9b2ebe8f" args="(446AAF, BuildingClass_Place_SkipFreeUnits, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">446AAF&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Place_SkipFreeUnits&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="comment">// allow free units and non-separate aircraft to be created</span>
        <span class="comment">// only once.</span>
        GET(BuildingClass*, pBld, EBP);
        <a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a>* pExt = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pBld);
        <span class="keywordflow">if</span>(!pExt-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#ab5ab1574ad150a14f8e46f2a08094cda" title="Prevent free units and aircraft to be created multiple times. Set when the free units have been grant...">FreeUnits_Done</a>) {
                pExt-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#ab5ab1574ad150a14f8e46f2a08094cda" title="Prevent free units and aircraft to be created multiple times. Set when the free units have been grant...">FreeUnits_Done</a> = <span class="keyword">true</span>;
                <span class="keywordflow">return</span> 0;
        }

        <span class="comment">// skip handling free units</span>
        <span class="keywordflow">return</span> 0x446FB6;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5c0ccda560b054d0003b46c3042d4f4"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="aa5c0ccda560b054d0003b46c3042d4f4" args="(7188F2, TeleportLocomotionClass_Unwarp_SinkJumpJets, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7188F2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TeleportLocomotionClass_Unwarp_SinkJumpJets&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                    {
        GET(CellClass*, pCell, EAX);
        GET(TechnoClass**, pTechno, ESI);

        <span class="keywordflow">if</span>(pCell-&gt;Tile_Is_Wet()) {
                <span class="keywordflow">if</span>(UnitClass* pUnit = specific_cast&lt;UnitClass*&gt;(pTechno[3])) {
                        <span class="keywordflow">if</span>(pUnit-&gt;Deactivated) {
                                <span class="comment">// this thing does not float</span>
                                R-&gt;BL(0);
                        }

                        <span class="comment">// manually sink it</span>
                        <span class="keywordflow">if</span>(pUnit-&gt;Type-&gt;SpeedType == st_Hover &amp;&amp; pUnit-&gt;Type-&gt;JumpJet) {
                                <span class="keywordflow">return</span> 0x718A66;
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52cd61fb9292b77bf3852987ea9d4161"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a52cd61fb9292b77bf3852987ea9d4161" args="(7187DA, TeleportLocomotionClass_Unwarp_PreventSelfCrush, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7187DA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TeleportLocomotionClass_Unwarp_PreventSelfCrush&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                        {
        GET(TechnoClass*, pTeleporter, EDI);
        GET(TechnoClass*, pContent, ECX);
        <span class="keywordflow">return</span> (pTeleporter == pContent) ? 0x71880A : 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aca54f5d2ec52972b8fbb6e060c3a8312"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="aca54f5d2ec52972b8fbb6e060c3a8312" args="(467E59, BulletClass_Update_NukeBall, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">467E59&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BulletClass_Update_NukeBall&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                    {
        <span class="comment">// changed the hardcoded way to just do this if the</span>
        <span class="comment">// warhead is called NUKE to an more universal</span>
        <span class="comment">// approach. every warhead having a pre-impact-anim</span>
        <span class="comment">// will get this behavior.</span>
        GET(BulletClass*, pBullet, EBP);

        <span class="keywordflow">if</span>(<a class="code" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a>* pExt = <a class="code" href="class_warhead_type_ext.html#ab2eb86c684fe6f15f9f95a9aa171e7dd">WarheadTypeExt::ExtMap</a>.Find(pBullet-&gt;WH)) {
                <span class="keywordflow">if</span>(pExt-&gt;PreImpactAnim != -1) {
                        <span class="comment">// copy what the original function does, but only do it if</span>
                        <span class="comment">// this is a SW launched bullet.</span>
                        <span class="keywordflow">if</span>(<a class="code" href="class_bullet_ext_1_1_ext_data.html">BulletExt::ExtData</a>* pData = <a class="code" href="class_bullet_ext.html#ad7ff43ebb912ebd0b4c3bd8c8c36a49d">BulletExt::ExtMap</a>.Find(pBullet)) {
                                <a class="code" href="class_s_w___nuclear_missile.html#ab2facd0eb37dd4a467c6d84d59779b06">SW_NuclearMissile::CurrentNukeType</a> = pData-&gt;NukeSW;

                                <span class="keywordflow">if</span>(pData-&gt;NukeSW) {
                                        <span class="keywordflow">if</span>(pBullet-&gt;GetHeight() &lt; 0) {
                                                pBullet-&gt;SetHeight(0);
                                        }

                                        <span class="comment">// replaces this call:</span>
                                        <span class="comment">//(*(void (__stdcall *)())(0x53AB70))();</span>

                                        <span class="comment">// manual light stuff</span>
                                        LightningStorm::Status(1);
                                        ScenarioClass::Instance-&gt;Timer4.StartTime = Unsorted::CurrentFrame;
                                        ScenarioClass::Instance-&gt;Timer4.unknown = R-&gt;Stack&lt;<span class="keywordtype">int</span>&gt;(0x28);
                                        ScenarioClass::Instance-&gt;Timer4.TimeLeft = 1;

                                        <span class="comment">// hacky stuff</span>
                                        *(<span class="keywordtype">int</span>*)0x827FC8 = Unsorted::CurrentFrame;
                                        *(<span class="keywordtype">int</span>*)0x827FCC = 30;

                                        <a class="code" href="class_s_w_type_ext.html#a7d47cf3e93df498050f953d8a3696ba5">SWTypeExt::ChangeLighting</a>(pData-&gt;NukeSW);
                                        MapClass::Instance-&gt;RedrawSidebar(1);

                                        <span class="comment">// cause yet another radar event</span>
                                        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pType = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pData-&gt;NukeSW)) {
                                                <span class="keywordflow">if</span>(pType-&gt;SW_RadarEvent.Get()) {
                                                        CellStruct coords;
                                                        pBullet-&gt;GetMapCoords(&amp;coords);

                                                        RadarEventClass::Create(RADAREVENT_SUPERWEAPONLAUNCHED, coords);
                                                }
                                        }
                                }
                        }

                        R-&gt;EAX(pExt-&gt;PreImpactAnim.Get());
                        <span class="keywordflow">return</span> 0x467EB6;
                }

                <span class="comment">// no pre impact anim</span>
                <span class="keywordflow">return</span> 0x467F9B;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53158ad8fd6e9b780b5a11ecbbda195c"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a53158ad8fd6e9b780b5a11ecbbda195c" args="(46B423, BulletClass_NukeMaker_PropagateSW, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">46B423&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BulletClass_NukeMaker_PropagateSW&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                          {
        GET(BulletClass*, pBullet, EBP);
        GET(BulletClass*, pNuke, EDI);

        <span class="keywordflow">if</span>(<a class="code" href="class_bullet_ext_1_1_ext_data.html">BulletExt::ExtData</a> *pData = <a class="code" href="class_bullet_ext.html#ad7ff43ebb912ebd0b4c3bd8c8c36a49d">BulletExt::ExtMap</a>.Find(pBullet)) {
                <span class="keywordflow">if</span>(<a class="code" href="class_bullet_ext_1_1_ext_data.html">BulletExt::ExtData</a> *pExt = <a class="code" href="class_bullet_ext.html#ad7ff43ebb912ebd0b4c3bd8c8c36a49d">BulletExt::ExtMap</a>.Find(pNuke)) {
                        pExt-&gt;NukeSW = pData-&gt;NukeSW;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a81d6e6e7ee20f78b4ae420e5e7f28a73"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a81d6e6e7ee20f78b4ae420e5e7f28a73" args="(46B371, BulletClass_NukeMaker, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">46B371&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BulletClass_NukeMaker&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                              {
        GET(BulletClass*, pBullet, EBP);

        <span class="keywordflow">if</span>(pBullet &amp;&amp; pBullet-&gt;WeaponType) {
                <span class="keywordflow">if</span>(<a class="code" href="class_bullet_ext_1_1_ext_data.html">BulletExt::ExtData</a> *pData = <a class="code" href="class_bullet_ext.html#ad7ff43ebb912ebd0b4c3bd8c8c36a49d">BulletExt::ExtMap</a>.Find(pBullet)) {
                        <span class="keywordflow">if</span>(SuperWeaponTypeClass *pSW = pData-&gt;NukeSW) {
                                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {

                                        <span class="comment">// get the per-SW nuke payload weapon</span>
                                        <span class="keywordflow">if</span>(WeaponTypeClass *pPayload = pExt-&gt;Nuke_Payload) {

                                                <span class="comment">// get damage and warhead. they are not available during</span>
                                                <span class="comment">// initialisation, so we gotta fall back now if they are invalid.</span>
                                                <span class="keywordtype">int</span> damage = (pExt-&gt;SW_Damage &lt; 0 ? pPayload-&gt;Damage : pExt-&gt;SW_Damage.Get());
                                                WarheadTypeClass *pWarhead = (!pExt-&gt;SW_Warhead ? pPayload-&gt;Warhead : pExt-&gt;SW_Warhead.Get());

                                                Debug::Log(<span class="stringliteral">&quot;Payload = %s\n&quot;</span>, pPayload-&gt;ID);
                                                Debug::Log(<span class="stringliteral">&quot;Payload WH = %s\n&quot;</span>, pPayload-&gt;Warhead-&gt;ID);
                                                Debug::Log(<span class="stringliteral">&quot;Payload Projectile = %s\n&quot;</span>, pPayload-&gt;Projectile-&gt;ID);
                                                Debug::Log(<span class="stringliteral">&quot;Warhead = %s\n&quot;</span>, pWarhead-&gt;ID);

                                                <span class="comment">// put the new values into the registers</span>
                                                R-&gt;Stack(0x30, R-&gt;EAX());
                                                R-&gt;ESI(pPayload);
                                                R-&gt;Stack(0x10, 0);
                                                R-&gt;Stack(0x18, pPayload-&gt;Speed);
                                                R-&gt;Stack(0x28, pPayload-&gt;Projectile);
                                                R-&gt;EAX(pWarhead);
                                                R-&gt;ECX(R-&gt;lea_Stack&lt;CoordStruct*&gt;(0x10));
                                                R-&gt;EDX(damage);
                                
                                                <span class="keywordflow">return</span> 0x46B3B7;
                                        } <span class="keywordflow">else</span> {
                                                Debug::Log(<span class="stringliteral">&quot;[%s] has no payload weapon type, or it is invalid.\n&quot;</span>, pSW-&gt;ID);
                                        }
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a265017ab92da076e8acfbbfb065c2ba1"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a265017ab92da076e8acfbbfb065c2ba1" args="(44CC9D, BuildingClass_Missile_NukeTakeOffB, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44CC9D&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Missile_NukeTakeOffB&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                           {
        GET(AnimClass*, pAnim, EAX);

        <span class="keywordflow">if</span>(!pAnim-&gt;ZAdjust) {
                pAnim-&gt;ZAdjust = -100;
        }
        <span class="keywordflow">return</span> 0x44CCA7;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9ad94c32bb058a2f04c805586a3130d"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="ab9ad94c32bb058a2f04c805586a3130d" args="(44CC8B, BuildingClass_Missile_NukeTakeOff, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44CC8B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Missile_NukeTakeOff&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                          {
        GET(BuildingClass*, pThis, ESI);

        <span class="keywordtype">int</span> type = pThis-&gt;FiringSWType;

        <span class="keywordflow">if</span>(SuperWeaponTypeClass::Array-&gt;ValidIndex(type)) {
                <span class="keywordflow">if</span>(SuperWeaponTypeClass* pSW = SuperWeaponTypeClass::Array-&gt;GetItem(type)) {
                        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {
                                <span class="keywordflow">if</span>(pExt-&gt;Nuke_TakeOff.Get()) {
                                        
                                        R-&gt;ECX(pExt-&gt;Nuke_TakeOff.Get());
                                        <span class="keywordflow">return</span> 0x44CC91;
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a382e154472373f16a8179adbbf6b3885"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a382e154472373f16a8179adbbf6b3885" args="(44CABA, BuildingClass_Missile_CreateBullet, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44CABA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Missile_CreateBullet&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                           {
        GET(CellClass*, pCell, EAX);
        GET(BuildingClass*, pThis, ESI);

        <span class="keywordtype">int</span> type = pThis-&gt;FiringSWType;

        <span class="keywordflow">if</span>(SuperWeaponTypeClass::Array-&gt;ValidIndex(type)) {
                <span class="keywordflow">if</span>(SuperWeaponTypeClass* pSW = SuperWeaponTypeClass::Array-&gt;GetItem(type)) {
                        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {
                                <span class="keywordflow">if</span>(WeaponTypeClass *pWeapon = pSW-&gt;WeaponType) {
                                        <span class="keywordflow">if</span>(BulletClass* pBullet = pWeapon-&gt;Projectile-&gt;CreateBullet(pCell, pThis, pWeapon-&gt;Damage, pWeapon-&gt;Warhead, 255, <span class="keyword">true</span>)) {
                                                <span class="keywordflow">if</span>(<a class="code" href="class_bullet_ext_1_1_ext_data.html">BulletExt::ExtData</a> *pData = <a class="code" href="class_bullet_ext.html#ad7ff43ebb912ebd0b4c3bd8c8c36a49d">BulletExt::ExtMap</a>.Find(pBullet)) {
                                                        pData-&gt;NukeSW = pSW;
                                                }

                                                R-&gt;EBX(pSW-&gt;WeaponType);
                                                R-&gt;EAX(pBullet);
                                                
                                                <span class="keywordflow">return</span> 0x44CAF2;
                                        }
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4da7fce6e53da9478b89f7614fd2ccea"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a4da7fce6e53da9478b89f7614fd2ccea" args="(44C9FF, BuildingClass_Missile_PsiWarn, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44C9FF&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Missile_PsiWarn&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                      {
        GET(BuildingClass*, pThis, ESI);
        <span class="keywordtype">int</span> type = pThis-&gt;FiringSWType;

        <span class="keywordflow">if</span>(SuperWeaponTypeClass::Array-&gt;ValidIndex(type)) {
                <span class="keywordflow">if</span>(SuperWeaponTypeClass* pSW = SuperWeaponTypeClass::Array-&gt;GetItem(type)) {
                        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {
                                <span class="keywordflow">if</span>(AnimTypeClass *pAnim = pExt-&gt;Nuke_PsiWarning) {
                                        R-&gt;EAX(pAnim-&gt;ArrayIndex);
                                        Debug::Log(<span class="stringliteral">&quot;PsiWarn set\n&quot;</span>);
                                        <span class="keywordflow">return</span> 0;
                                }

                                <span class="comment">// skip psi warning.</span>
                                Debug::Log(<span class="stringliteral">&quot;PsiWarn skipped\n&quot;</span>);
                                <span class="keywordflow">return</span> 0x44CA7A;
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a8e2002b32a39a3533db62d92ca6569"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a4a8e2002b32a39a3533db62d92ca6569" args="(48A59A, MapClass_SelectDamageAnimation_LightningWarhead, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">48A59A&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MapClass_SelectDamageAnimation_LightningWarhead&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                        {
        <span class="comment">// override the lightning bolt explosion</span>
        GET(WarheadTypeClass*, pWarhead, ESI);
        <span class="keywordflow">if</span>(SuperClass* pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pType)) {
                        <span class="keywordflow">if</span>((pData-&gt;SW_Warhead == pWarhead) &amp;&amp; pData-&gt;Weather_BoltExplosion.Get()) {
                                R-&gt;EAX(pData-&gt;Weather_BoltExplosion.Get());
                                <span class="keywordflow">return</span> 0x48A5AD;
                        }
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a93c7bcd6b7a271a5dd6f8a8149e5c4e1"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a93c7bcd6b7a271a5dd6f8a8149e5c4e1" args="(53A300, LightningStorm_Strike2, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53A300&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LightningStorm_Strike2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                               {
        <span class="keywordflow">if</span>(SuperClass* pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                GET_STACK(CoordStruct, Coords, 0x4);

                SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

                <span class="comment">// get center of cell coords</span>
                CellClass* pCell = MapClass::Instance-&gt;GetCellAt(&amp;Coords);
                pCell-&gt;GetCoordsWithBridge(&amp;Coords);

                <span class="keywordflow">if</span>(Coords != *(CoordStruct*)(0xA9FA30)) {

                        <span class="comment">// create a bolt animation</span>
                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a27c8642b9d6ccd729b623b79db37af58">Weather_Bolts</a>.Count) {
                                DWORD rnd = ScenarioClass::Instance-&gt;Random.Random();
                                AnimTypeClass* pAnimType = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a27c8642b9d6ccd729b623b79db37af58">Weather_Bolts</a>.GetItem(rnd % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a27c8642b9d6ccd729b623b79db37af58">Weather_Bolts</a>.Count);

                                AnimClass* pAnim = NULL;
                                GAME_ALLOC(AnimClass, pAnim, pAnimType, &amp;Coords);
                                
                                <span class="keywordflow">if</span>(pAnim) {
                                        DynamicVectorClass&lt;AnimClass*&gt;* pAnims = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9FA18);
                                        pAnims-&gt;AddItem(pAnim);
                                }
                        }
                        
                        <span class="comment">// play lightning sound</span>
                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a832c6e34428afef6cbd13fe59f5c9990">Weather_Sounds</a>.Count) {
                                <span class="keywordtype">int</span> rnd = ScenarioClass::Instance-&gt;Random.Random();
                                VocClass::PlayAt(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a832c6e34428afef6cbd13fe59f5c9990">Weather_Sounds</a>.GetItem(rnd % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a832c6e34428afef6cbd13fe59f5c9990">Weather_Sounds</a>.Count), &amp;Coords, NULL);
                        }
                                                
                        <span class="keywordtype">bool</span> debris = <span class="keyword">false</span>;
                        BuildingClass* pBld = pCell-&gt;GetBuilding();

                        CoordStruct empty;
                        ObjectClass* pObj = pCell-&gt;FindObjectNearestTo(&amp;empty, <span class="keyword">false</span>, NULL);
                        <span class="keywordtype">bool</span> isInfantry = (pObj &amp;&amp; pObj-&gt;WhatAmI() == abs_Infantry);

                        <span class="comment">// empty cell action</span>
                        <span class="keywordflow">if</span>(!pBld &amp;&amp; !pObj) {
                                <span class="keywordflow">switch</span>(pCell-&gt;LandType)
                                {
                                <span class="keywordflow">case</span> lt_Road:
                                <span class="keywordflow">case</span> lt_Rock:
                                <span class="keywordflow">case</span> lt_Wall:
                                <span class="keywordflow">case</span> lt_Weeds:
                                        debris = <span class="keyword">true</span>;
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">default</span>:
                                <span class="keywordflow">break</span>;
                        }
                        }

                        <span class="comment">// account for lightning rods</span>
                        <span class="keywordtype">int</span> damage = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a892c327800d0e183b03c4c002ee73106">SW_Damage</a>;
                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa329812b5b8ac11d16dc0cf1008be60c">Weather_IgnoreLightningRod</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                <span class="keywordflow">if</span>(BuildingClass* pBld = specific_cast&lt;BuildingClass*&gt;(pObj)) {
                                        <span class="keywordflow">if</span>(pBld-&gt;Type-&gt;LightningRod) {
                                                <span class="keywordflow">if</span>(<a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a> *pExt = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.Find(pBld-&gt;Type)) {
                                                        <span class="comment">// multiply the damage, but never go below zero.</span>
                                                        damage = (int)std::max(damage * pExt-&gt;LightningRod_Modifier, 0.0);
                                                }
                                        }
                                }
                        }

                        <span class="comment">// cause mayhem</span>
                        <span class="keywordflow">if</span>(damage) {
                                MapClass::FlashbangWarheadAt(damage, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3641f612552d25fd9aaa86982241475d">SW_Warhead</a>, Coords, <span class="keyword">false</span>, 0);
                                MapClass::DamageArea(&amp;Coords, damage, NULL, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3641f612552d25fd9aaa86982241475d">SW_Warhead</a>, <span class="keyword">true</span>, pSuper-&gt;Owner);

                                <span class="comment">// fancy stuff if damage is dealt</span>
                                AnimClass* pAnim = NULL;
                                AnimTypeClass* pAnimType = MapClass::SelectDamageAnimation(damage, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3641f612552d25fd9aaa86982241475d">SW_Warhead</a>, pCell-&gt;LandType, &amp;Coords);
                                GAME_ALLOC(AnimClass, pAnim, pAnimType, &amp;Coords);
                        }

                        <span class="comment">// has the last target been destroyed?</span>
                        <span class="keywordflow">if</span>(pObj != pCell-&gt;FindObjectNearestTo(&amp;empty, <span class="keyword">false</span>, NULL)) {
                                debris = <span class="keyword">true</span>;
                        }

                        <span class="comment">// create some debris</span>
                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ada39a4e88e5418028343468a2b9ffac8">Weather_Debris</a>.Count) {
                                
                                <span class="comment">// dead infantry never generates debris.</span>
                                <span class="keywordflow">if</span>(!isInfantry &amp;&amp; debris) {
                                        <span class="keywordtype">int</span> count = ScenarioClass::Instance-&gt;Random.RandomRanged(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a67de048015f765eadc0308fd5036072d">Weather_DebrisMin</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a6ee74598110afd393f765ebebc02c4be">Weather_DebrisMax</a>);
                                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;count; ++i) {
                                                DWORD rnd = ScenarioClass::Instance-&gt;Random.Random();
                                                AnimTypeClass *pAnimType = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ada39a4e88e5418028343468a2b9ffac8">Weather_Debris</a>.GetItem(rnd % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ada39a4e88e5418028343468a2b9ffac8">Weather_Debris</a>.Count);

                                                AnimClass *pAnim = NULL;
                                                GAME_ALLOC(AnimClass, pAnim, pAnimType, &amp;Coords);
                                        }
                                }
                        }
                }
                
                <span class="keywordflow">return</span> 0x53A69A;
        }
        
        <span class="comment">// legacy way for triggers.</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acab57f7d36ecd61eedf587647d8fefb9"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="acab57f7d36ecd61eedf587647d8fefb9" args="(53A140, LightningStorm_Strike, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53A140&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LightningStorm_Strike&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                              {
        <span class="keywordflow">if</span>(SuperClass* pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                GET_STACK(CellStruct, Cell, 0x4);

                SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

                <span class="comment">// get center of cell coords</span>
                CoordStruct Coords;
                CellClass* pCell = MapClass::Instance-&gt;GetCellAt(&amp;Cell);
                pCell-&gt;GetCoordsWithBridge(&amp;Coords);
                
                <span class="comment">// create a cloud animation</span>
                <span class="keywordflow">if</span>(Coords != *(CoordStruct*)(0xA9FA30)) {
                        <span class="comment">// select the anim</span>
                        AnimTypeClass* pAnimType = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a15c3973d8b84d625382eaf3eb7958ad9">Weather_Clouds</a>.GetItem(ScenarioClass::Instance-&gt;Random.Random() % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a15c3973d8b84d625382eaf3eb7958ad9">Weather_Clouds</a>.Count);

                        <span class="comment">// infer the height this thing will be drawn at.</span>
                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a8eff69961713d540e1ddb3c4c61481ef">Weather_CloudHeight</a> &lt; 0) {
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a27c8642b9d6ccd729b623b79db37af58">Weather_Bolts</a>.Count) {
                                        AnimTypeClass* pBoltAnim = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a27c8642b9d6ccd729b623b79db37af58">Weather_Bolts</a>.GetItem(0);
                                        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a8eff69961713d540e1ddb3c4c61481ef">Weather_CloudHeight</a> = (int)Game::F2I(((pBoltAnim-&gt;GetImage()-&gt;Height / 2) - 0.5) * *(<span class="keywordtype">double</span>*)(0xB0CDD8));
                                }
                        }
                        Coords.Z += pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a8eff69961713d540e1ddb3c4c61481ef">Weather_CloudHeight</a>;

                        <span class="comment">// create it and do hacky book keeping.</span>
                        AnimClass* pAnim = NULL;
                        GAME_ALLOC(AnimClass, pAnim, pAnimType, &amp;Coords);

                        <span class="keywordflow">if</span>(pAnim) {
                                DynamicVectorClass&lt;AnimClass*&gt;* pAnims1 = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9FA60);
                                DynamicVectorClass&lt;AnimClass*&gt;* pAnims2 = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9F9D0);

                                pAnims1-&gt;AddItem(pAnim);
                                pAnims2-&gt;AddItem(pAnim);
                        }
                }

                R-&gt;EAX(<span class="keyword">true</span>);
                <span class="keywordflow">return</span> 0x53A2F1;
        }

        <span class="comment">// legacy way for triggers.</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a71069abffd064c17ef5fbcef52af6c"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a6a71069abffd064c17ef5fbcef52af6c" args="(53A6C0, LightningStorm_Update, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53A6C0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LightningStorm_Update&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                              {
        <span class="keywordflow">if</span>(SuperClass* pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                
                <span class="comment">// switch lightning (most likely for nuke)</span>
                <span class="keywordtype">int</span>* tmp1 = (<span class="keywordtype">int</span>*)0x827FC8;
                <span class="keywordtype">int</span>* tmp2 = (<span class="keywordtype">int</span>*)0x827FCC;
                <span class="keywordflow">if</span>(*tmp2 != -1) {
                        <span class="keywordtype">int</span> a = *tmp1 + *tmp2;
                        <span class="keywordflow">if</span>(a &lt; Unsorted::CurrentFrame) {
                                <span class="keywordtype">int</span> status = LightningStorm::Status();
                                <span class="keywordflow">if</span>(status == 1) {
                                        LightningStorm::Status(2);
                                        *tmp1 = Unsorted::CurrentFrame;
                                        *tmp2 = 15;
                                        ScenarioClass::Instance-&gt;UpdateLighting();
                                        MapClass::Instance-&gt;RedrawSidebar(1);
                                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status == 2) {
                                        <a class="code" href="class_s_w___nuclear_missile.html#ab2facd0eb37dd4a467c6d84d59779b06">SW_NuclearMissile::CurrentNukeType</a> = NULL;
                                        LightningStorm::Status(0);
                                }
                        }
                }

                <span class="comment">// update other screen effects</span>
                PsyDom::Update();
                ChronoScreenEffect::Update();

                <span class="comment">// remove all clouds from list that did strike already</span>
                DynamicVectorClass&lt;AnimClass*&gt;* pAnims0 = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9FA18);
                <span class="keywordflow">if</span>(pAnims0-&gt;Count &gt; 0) {
                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=pAnims0-&gt;Count-1; i&gt;=0; --i) {
                                <span class="keywordflow">if</span>(AnimClass *pAnim = pAnims0-&gt;GetItem(i)) {
                                        <span class="keywordflow">if</span>(pAnim-&gt;CurrentFrame &gt;= pAnim-&gt;Type-&gt;GetImage()-&gt;Frames / 2) {
                                                pAnims0-&gt;RemoveItem(i);
                                        }
                                }
                        }
                }

                <span class="comment">// find the clouds that should strike right now</span>
                DynamicVectorClass&lt;AnimClass*&gt;* pAnims1 = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9FA60);
                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=pAnims1-&gt;Count-1; i&gt;=0; --i) {
                        <span class="keywordflow">if</span>(AnimClass *pAnim = pAnims1-&gt;GetItem(i)) {
                                <span class="keywordflow">if</span>(pAnim-&gt;CurrentFrame &gt;= pAnim-&gt;Type-&gt;GetImage()-&gt;Frames / 2) {
                                        CoordStruct crdStrike;
                                        pAnim-&gt;GetCoords(&amp;crdStrike);
                                        LightningStorm::Strike2(crdStrike);
                                        pAnims1-&gt;RemoveItem(i);
                                }
                        }
                }

                DynamicVectorClass&lt;AnimClass*&gt;* pAnims2 = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9F9D0);
                <span class="keywordflow">if</span>(pAnims2-&gt;Count &lt;= 0) {
                        <span class="comment">// end the lightning storm</span>
                        <span class="keywordflow">if</span>(LightningStorm::TimeToEnd()) {
                                <span class="keywordflow">if</span>(LightningStorm::Active()) {
                                        CellStruct empty = {0, 0};
                                        LightningStorm::Active(<span class="keyword">false</span>);
                                        LightningStorm::Owner(NULL);
                                        LightningStorm::Coords(empty);
                                        <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a> = NULL;
                                        ScenarioClass::Instance-&gt;UpdateLighting();
                                }
                                LightningStorm::TimeToEnd(<span class="keyword">false</span>);
                        }
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=pAnims2-&gt;Count-1; i&gt;=0; --i) {
                                <span class="keywordflow">if</span>(AnimClass *pAnim = pAnims2-&gt;GetItem(i)) {
                                        <span class="keywordflow">if</span>(pAnim-&gt;CurrentFrame &gt;= pAnim-&gt;Type-&gt;GetImage()-&gt;Frames - 1) {
                                                pAnims2-&gt;RemoveItem(i);
                                        }
                                }
                        }
                }

                CellStruct LSCell = LightningStorm::Coords();

                SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

                <span class="keywordflow">if</span>(!LightningStorm::Active() || LightningStorm::TimeToEnd()) {
                        <span class="keywordtype">int</span> deferment = LightningStorm::Deferment();

                        <span class="comment">// still counting down?</span>
                        <span class="keywordflow">if</span>(deferment &gt; 0) {
                                --deferment;
                                LightningStorm::Deferment(deferment);

                                <span class="comment">// still waiting</span>
                                <span class="keywordflow">if</span>(deferment) {
                                        <span class="keywordflow">if</span>(!(deferment % 225)) {
                                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aafbe768aba09bac422a84476d617f448">Weather_PrintText</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                                        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aefc7cf38fce1e44e72ea8f549226adb9">Message_Launch</a>, pSuper-&gt;Owner);
                                                }
                                        }
                                } <span class="keywordflow">else</span> {
                                        <span class="comment">// launch the storm</span>
                                        LightningStorm::Start(LightningStorm::Duration(), 0, LSCell,
                                                LightningStorm::Owner());
                                }
                        }
                } <span class="keywordflow">else</span> {
                        <span class="comment">// does this Lightning Storm go on?</span>
                        <span class="keywordtype">int</span> duration = LightningStorm::Duration();
                        <span class="keywordflow">if</span>(duration == -1 || duration + LightningStorm::StartTime() &gt;= Unsorted::CurrentFrame) {

                                <span class="comment">// deterministic damage. the very target cell.</span>
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a00c04a38da6e24c57a9d32fc2900b366">Weather_HitDelay</a> &gt; 0 &amp;&amp; !(Unsorted::CurrentFrame % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a00c04a38da6e24c57a9d32fc2900b366">Weather_HitDelay</a>)) {
                                        LightningStorm::Strike(LightningStorm::Coords());
                                }

                                <span class="comment">// random damage. somewhere in range.</span>
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a2c3e78203c68f592b946834ec1384a19">Weather_ScatterDelay</a> &gt; 0 &amp;&amp; !(Unsorted::CurrentFrame % pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a2c3e78203c68f592b946834ec1384a19">Weather_ScatterDelay</a>)) {
                                        <span class="keywordtype">int</span> width = (int)pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a7129c297fbbabd4f14ba5e9ffb904c7f">SW_WidthOrRange</a>;
                                        <span class="keywordtype">int</span> height = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adeebf914a68e530c66f7db66811d0d3b">SW_Height</a>;
                                        <span class="keywordtype">bool</span> isRectangle = <span class="keyword">true</span>;

                                        <span class="comment">// is circular range?</span>
                                        <span class="keywordflow">if</span>(height &lt; 0) {
                                                height = width;
                                                isRectangle = <span class="keyword">false</span>;
                                        }

                                        <span class="comment">// generate a new place to strike</span>
                                        CellStruct cell;
                                        <span class="keywordflow">if</span>(height &gt; 0 &amp;&amp; width &gt; 0 &amp;&amp; MapClass::Instance-&gt;CellExists(&amp;LSCell)) {
                                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a9f0b78e9fea1a258a21e9f68c30b054d">Weather_ScatterCount</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>(); k&gt;0; --k) {
                                                        <span class="keywordtype">bool</span> found;
                                                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;3; ++i) {
                                                                cell = LSCell;
                                                                cell.X += (short)ScenarioClass::Instance-&gt;Random.RandomRanged(-width / 2, width / 2);
                                                                cell.Y += (short)ScenarioClass::Instance-&gt;Random.RandomRanged(-height / 2, height / 2);
        
                                                                <span class="comment">// don&#39;t even try if this is invalid</span>
                                                                found = <span class="keyword">false</span>;
                                                                <span class="keywordflow">if</span>(MapClass::Instance-&gt;CellExists(&amp;cell)) {
                                                                        <span class="comment">// out of range?</span>
                                                                        <span class="keywordflow">if</span>(!isRectangle) {
                                                                                <span class="keywordflow">if</span>(cell.DistanceFrom(LSCell) &gt; pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a7129c297fbbabd4f14ba5e9ffb904c7f">SW_WidthOrRange</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                                                                        <span class="keywordflow">continue</span>;
                                                                                }
                                                                        }

                                                                        <span class="comment">// assume valid</span>
                                                                        found = <span class="keyword">true</span>;

                                                                        <span class="comment">// if we respect lightning rods, start looking for one.</span>
                                                                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa329812b5b8ac11d16dc0cf1008be60c">Weather_IgnoreLightningRod</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                                                                <span class="comment">// if, by coincidence, this is a rod, hit it.</span>
                                                                                CellClass *pImpactCell = MapClass::Instance-&gt;GetCellAt(&amp;cell);
                                                                                <span class="keywordflow">if</span>(BuildingClass *pBld = pImpactCell-&gt;GetBuilding()) {
                                                                                        <span class="keywordflow">if</span>(pBld-&gt;Type-&gt;LightningRod) {
                                                                                                <span class="keywordflow">break</span>;
                                                                                        }
                                                                                }

                                                                                <span class="comment">// if a lightning rod is next to this, hit that instead. naive.</span>
                                                                                CoordStruct nullCoords;
                                                                                <span class="keywordflow">if</span>(ObjectClass* pObj = pImpactCell-&gt;FindObjectNearestTo(&amp;nullCoords, <span class="keyword">false</span>, pImpactCell-&gt;GetBuilding())) {
                                                                                        <span class="keywordflow">if</span>(BuildingClass *pBld = specific_cast&lt;BuildingClass*&gt;(pObj)) {
                                                                                                <span class="keywordflow">if</span>(pBld-&gt;Type-&gt;LightningRod) {
                                                                                                        cell = MapClass::Instance-&gt;GetCellAt(&amp;pBld-&gt;Location)-&gt;MapCoords;
                                                                                                        <span class="keywordflow">break</span>;
                                                                                                }
                                                                                        }
                                                                                }
                                                                        }

                                                                        <span class="comment">// is this spot far away from another cloud?</span>
                                                                        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a6da5bc374329cad8fa22ab283a61a578">Weather_Separation</a> &gt; 0) {
                                                                                DynamicVectorClass&lt;AnimClass*&gt;* pAnims = (DynamicVectorClass&lt;AnimClass*&gt;*)(0xA9F9D0);
                                                                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;pAnims-&gt;Count; ++k) {
                                                                                        <span class="comment">// assume success and disprove.</span>
                                                                                        CellStruct *pCell2 = &amp;pAnims-&gt;GetItem(k)-&gt;GetCell()-&gt;MapCoords;
                                                                                        <span class="keywordtype">int</span> dist = std::abs(pCell2-&gt;X - cell.X) + std::abs(pCell2-&gt;Y - cell.Y);
                                                                                        <span class="keywordflow">if</span>(dist &lt; pData-&gt;Weather_Separation.Get()) {
                                                                                                found = <span class="keyword">false</span>;
                                                                                                <span class="keywordflow">break</span>;
                                                                                        }
                                                                                }
                                                                        }

                                                                        <span class="comment">// valid cell.</span>
                                                                        <span class="keywordflow">if</span>(found) {
                                                                                <span class="keywordflow">break</span>;
                                                                        }
                                                                }
                                                        }

                                                        <span class="comment">// found a valid position. strike there.</span>
                                                        <span class="keywordflow">if</span>(found) {
                                                                LightningStorm::Strike(cell);
                                                        }
                                                }
                                        }
                                }
                        } <span class="keywordflow">else</span> {
                                <span class="comment">// it&#39;s over already</span>
                                LightningStorm::TimeToEnd(1);
                        }
                }

                <span class="comment">// jump over everything</span>
                <span class="keywordflow">return</span> 0x53AB4C;
        }

        <span class="comment">// still support old logic for triggers</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6384561d281d3fdc4b41f6fe0d50e05"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="aa6384561d281d3fdc4b41f6fe0d50e05" args="(539EB0, LightningStorm_Start, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">539EB0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LightningStorm_Start&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                             {
        <span class="keywordflow">if</span>(SuperClass* pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                GET(<span class="keywordtype">int</span>, duration, ECX);
                GET(<span class="keywordtype">int</span>, deferment, EDX);
                GET_STACK(CellStruct, Coords, 0x4);
                GET_STACK(HouseClass*, pOwner, 0x8);

                SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

                <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;

                <span class="comment">// generate random coords if the passed ones are empty</span>
                <span class="keywordflow">if</span>(Coords.X == 0 &amp;&amp; Coords.Y == 0) {
                        <span class="keywordflow">for</span>(; !MapClass::Instance-&gt;CellExists(&amp;Coords);) {
                                Coords.X = (short)ScenarioClass::Instance-&gt;Random.RandomRanged(0, MapClass::Instance-&gt;unknown_12C);
                                Coords.Y = (short)ScenarioClass::Instance-&gt;Random.RandomRanged(0, MapClass::Instance-&gt;unknown_130);
                        }
                }

                <span class="comment">// yes. set them even if the Lightning Storm</span>
                <span class="comment">// is active.</span>
                LightningStorm::Coords(Coords);
                LightningStorm::Owner(pOwner);
                
                <span class="keywordflow">if</span>(!LightningStorm::Active()) {
                        <span class="keywordflow">if</span>(deferment) {
                                <span class="comment">// register this storm to start soon</span>
                                <span class="keywordflow">if</span>(!LightningStorm::Deferment() || LightningStorm::Deferment() &gt;= deferment) {
                                        LightningStorm::Deferment(deferment);
                                }
                                LightningStorm::Duration(duration);
                                ret = <span class="keyword">true</span>;
                        } <span class="keywordflow">else</span> {
                                <span class="comment">// start the mayhem. not setting this will create an</span>
                                <span class="comment">// infinite loop. not tested what happens after that.</span>
                                LightningStorm::Duration(duration);
                                LightningStorm::StartTime(Unsorted::CurrentFrame);
                                LightningStorm::Active(<span class="keyword">true</span>);

                                <span class="comment">// blackout</span>
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a9966af807b6070e49c2458dd6052ded1">Weather_RadarOutage</a> &gt; 0) {
                                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;HouseClass::Array-&gt;Count; ++i) {
                                                HouseClass* pHouse = HouseClass::Array-&gt;GetItem(i);
                                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a83b7da1f9c60a0c83012755802149397">IsHouseAffected</a>(pOwner, pHouse, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad9e094614db833d00c530dab8d685e67">Weather_RadarOutageAffects</a>)) {
                                                        <span class="keywordflow">if</span>(!pHouse-&gt;Defeated) {
                                                                pHouse-&gt;CreateRadarOutage(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a9966af807b6070e49c2458dd6052ded1">Weather_RadarOutage</a>);
                                                        }
                                                }
                                        }
                                }
                                <span class="keywordflow">if</span>(HouseClass::Player) {
                                        HouseClass::Player-&gt;RadarBlackout = <span class="keyword">true</span>;
                                }

                                <span class="comment">// let there be light</span>
                                ScenarioClass::Instance-&gt;UpdateLighting();

                                <span class="comment">// activation stuff</span>
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aafbe768aba09bac422a84476d617f448">Weather_PrintText</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad2dda52fec32a5f4e32af839005f5d89">Message_Activate</a>, pSuper-&gt;Owner);
                                }
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a35be20d0a0a91f8b085556211f7c4d4f">SW_ActivationSound</a> != -1) {
                                        VocClass::PlayGlobal(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a35be20d0a0a91f8b085556211f7c4d4f">SW_ActivationSound</a>, 1.0, 0);
                                }
                                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a59db7b4b7d4e8a199e1ed48b6b89236b">SW_RadarEvent</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                        RadarEventClass::Create(RADAREVENT_SUPERWEAPONLAUNCHED, Coords);
                                }

                                MapClass::Instance-&gt;RedrawSidebar(1);
                        }
                }

                R-&gt;EAX(ret);
                <span class="keywordflow">return</span> 0x539F80;
        }

        <span class="comment">// legacy way still needed for triggers.</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a47dd69ec16d685cd9cf1bff1ab4e8a4b"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a47dd69ec16d685cd9cf1bff1ab4e8a4b" args="(53AF40, PsyDom_Update, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53AF40&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PsyDom_Update&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                      {
        <span class="keywordflow">return</span> 0x53B060;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e8cafda9ca1d91af324746fefac8596"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a9e8cafda9ca1d91af324746fefac8596" args="(53C3B1, ScenarioClass_UpdateLighting_Nuke, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53C3B1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScenarioClass_UpdateLighting_Nuke&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                          {
        <span class="keywordflow">if</span>(SuperWeaponTypeClass *pType = <a class="code" href="class_s_w___nuclear_missile.html#ab2facd0eb37dd4a467c6d84d59779b06">SW_NuclearMissile::CurrentNukeType</a>) {
                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext.html#a7d47cf3e93df498050f953d8a3696ba5">SWTypeExt::ChangeLighting</a>(pType)) {
                        R-&gt;EAX(1);
                        <span class="keywordflow">return</span> 0x53C43F;
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">return</span> 0x53C29D;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77da768a39d36af7fa76f179ce2706dc"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="a77da768a39d36af7fa76f179ce2706dc" args="(53C2A6, ScenarioClass_UpdateLighting_LightningStorm, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53C2A6&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScenarioClass_UpdateLighting_LightningStorm&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                    {
        <span class="keywordflow">if</span>(SuperClass *pSuper = <a class="code" href="class_s_w___lightning_storm.html#a99c6a8d024432bfb41b3f8c81ba44eb6">SW_LightningStorm::CurrentLightningStorm</a>) {
                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext.html#a7d47cf3e93df498050f953d8a3696ba5">SWTypeExt::ChangeLighting</a>(pSuper)) {
                        R-&gt;EAX(1);
                        <span class="keywordflow">return</span> 0x53C43F;
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">return</span> 0x53C313;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aecb51039e2bd5de1d1ca7627218c8c30"></a><!-- doxytag: member="Hooks.Legacy.cpp::DEFINE_HOOK" ref="aecb51039e2bd5de1d1ca7627218c8c30" args="(53C321, ScenarioClass_UpdateLighting_PsyDom, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">53C321&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScenarioClass_UpdateLighting_PsyDom&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                            {
        <span class="keywordflow">if</span>(SuperClass *pSuper = <a class="code" href="class_s_w___psychic_dominator.html#aa98a7373c9b416bb9f069220a596a2af">SW_PsychicDominator::CurrentPsyDom</a>) {
                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext.html#a7d47cf3e93df498050f953d8a3696ba5">SWTypeExt::ChangeLighting</a>(pSuper)) {
                        R-&gt;EAX(1);
                        <span class="keywordflow">return</span> 0x53C43F;
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">return</span> 0x53C38E;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 17 2011 23:42:31 for Ares by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
