<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: src/Ext/Techno/Hooks.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ares</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_61edef5b85f25cd5be6bbdff5e99e478.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_de16222cf794c2cbeaf77d0392606035.html">Ext</a>      </li>
      <li class="navelem"><a class="el" href="dir_bb671efe9af5d655b82ce5fe766ceb8f.html">Techno</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Hooks.cpp File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_techno_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_techno_type_2_body_8h.html">../TechnoType/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_building_2_body_8h.html">../Building/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_building_type_2_body_8h.html">../BuildingType/Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_debug_8h.html">../../Misc/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_jammer_class_8h.html">../../Misc/JammerClass.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_powered_unit_class_8h.html">../../Misc/PoweredUnitClass.h</a>&quot;</code><br/>
<code>#include &lt;SpecificStructures.h&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#acd13dd4e1e3089733ce201029c756bc8">DEFINE_HOOK</a> (737F97, UnitClass_ReceiveDamage, 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a70a006bd12a9751219642fe7aa112f0d">DEFINE_HOOK</a> (41668B, AircraftClass_ReceiveDamage, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a3bf7463228e453cd6dfd9eed3f2144ff">DEFINE_HOOK</a> (6F9E50, TechnoClass_Update, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aa0db1f91ecacb2c2aeb12e1df209f903">DEFINE_HOOK</a> (6F9E76, TechnoClass_Update_CheckOperators, 6)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TechnoClass::Update is called every frame; returning 0 tells it to execute the original function's code as well.  <a href="#aa0db1f91ecacb2c2aeb12e1df209f903"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a259774c2bd85df6f7e14a49b18d44434">DEFINE_HOOK</a> (415CA6, AircraftClass_Paradrop, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ace5cdc882a4a8947ccf6b805ddf1f436">DEFINE_HOOK</a> (415DF6, AircraftClass_Paradrop_Carryall, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aef5a5b0690d127c18100c282b8d23b37">DEFINE_HOOK</a> (6F407D, TechnoClass_Init_1, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#acc0737ed0307ee5550a05c5617e50b84">DEFINE_HOOK</a> (6F4103, TechnoClass_Init_2, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ae0f1defc31626b66e4bc7b0f09bfe4dc">DEFINE_HOOK</a> (71A860, TemporalClass_UpdateA, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aabf5552f50b8928c1f1798f97aee21cf">DEFINE_HOOK</a> (71AB30, TemporalClass_GetHelperDamage, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a690915a1cdca7277ad678c826d14948d">DEFINE_HOOK</a> (62A020, ParasiteClass_Update, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ab8e83759985dcf0df54e8a2629684cbe">DEFINE_HOOK</a> (62A7B1, Parasite_ExitUnit, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a9bb2ad6ab82eb357e8bcf1886bc96ed6">DEFINE_HOOK</a> (629804, ParasiteClass_UpdateSquiddy, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a15954c73670d3ad0e2f80209d852310c">DEFINE_HOOK</a> (6F3330, TechnoClass_SelectWeapon, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a0ff690907f5a3608a85cd956e6c48752">DEFINE_HOOK</a> (51F76D, InfantryClass_Unload, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#af17380fb9c25530b62b125542e6dcdc4">DEFINE_HOOK</a> (51CE9A, InfantryClass_Idle, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ab142f7b86b89d00859a19cd60b4818b2">DEFINE_HOOK</a> (747BBD, UnitTypeClass_LoadFromINI, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a33d52d40d6d585376ca84626f186a0ae">DEFINE_HOOK</a> (5215F9, InfantryClass_UpdateDeploy, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a7706437ae83f93b9655a4d741ef73b1f">EXPORT_FUNC</a> (InfantryClass_UpdateDeploy2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aef49e7beec4db73c32f8c8b207908081">DEFINE_HOOK</a> (7101CF, FootClass_ImbueLocomotor, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a1120d23c1795a6a77541bac64c7a5442">DEFINE_HOOK</a> (4DAA68, FootClass_Update_MoveSound, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a3f616db9ba43c9d24272478e82c68ab1">DEFINE_HOOK</a> (701C97, TechnoClass_ReceiveDamage_AffectsEnemies, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aafa2078f776c8e913ae3bc273d86c22d">DEFINE_HOOK</a> (7090A8, TechnoClass_SelectFiringVoice, 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a7e402fdb2626143d8ba6003f1463e143">DEFINE_HOOK</a> (70E2D2, TechnoClass_IronCurtain_Modify, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a6e9c32cac2382e5c8dee05cc0ecb9d8d">DEFINE_HOOK</a> (5198AD, InfantryClass_UpdatePosition_EnteredGrinder, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a66ab67c76a281758451b4b39e9ed4745">DEFINE_HOOK</a> (73A1BC, UnitClass_UpdatePosition_EnteredGrinder, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a4bec982ed342dab7105406e1f798e243">DEFINE_HOOK</a> (6F6AC9, TechnoClass_Remove, 6)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acd13dd4e1e3089733ce201029c756bc8"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="acd13dd4e1e3089733ce201029c756bc8" args="(737F97, UnitClass_ReceiveDamage, 0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">737F97&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitClass_ReceiveDamage&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(UnitClass *, t, ESI);
        GET_STACK(TechnoClass *, Killer, 0x54);
        GET_STACK(<span class="keywordtype">bool</span>, select, 0x13);
        GET_STACK(<span class="keywordtype">bool</span>, ignoreDefenses, 0x58);
        <a class="code" href="class_techno_ext.html#a58124d749f052ddab5805e03c507e96d">TechnoExt::SpawnSurvivors</a>(t, Killer, select, ignoreDefenses);

        <span class="keywordflow">return</span> 0x73838A;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4bec982ed342dab7105406e1f798e243"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a4bec982ed342dab7105406e1f798e243" args="(6F6AC9, TechnoClass_Remove, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F6AC9&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Remove&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                           {
        GET(TechnoClass *, pThis, ESI);
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a>* <a class="code" href="class_techno_ext.html">TechnoExt</a> = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);

        <span class="comment">// if the removed object is a radar jammer, unjam all jammed radars</span>
        <span class="keywordflow">if</span>(TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) {
                TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#a0f19799beebd05e67631d3bc6b8af84e" title="Unregisters this Jammer on all structures.">UnjamAll</a>();
                <span class="keyword">delete</span> TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>;
                TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a> = NULL;
        }
        
        <span class="comment">// #617 powered units</span>
        <span class="keywordflow">if</span>(TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a>)
        {
                <span class="keyword">delete</span> TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a>;
                TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a> = NULL;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66ab67c76a281758451b4b39e9ed4745"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a66ab67c76a281758451b4b39e9ed4745" args="(73A1BC, UnitClass_UpdatePosition_EnteredGrinder, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">73A1BC&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitClass_UpdatePosition_EnteredGrinder&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(UnitClass *, Vehicle, EBP);
        GET(BuildingClass *, Grinder, EBX);

        <a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a> *pData = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Grinder);

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#aa52160d197643b1ec47982baea06a2cd" title="Returns true if Victim wasn&amp;#39;t buildable and now should be.">ReverseEngineer</a>(Vehicle)) {
                <span class="keywordflow">if</span>(Vehicle-&gt;Owner-&gt;ControlledByPlayer()) {
                        VoxClass::Play(<span class="stringliteral">&quot;EVA_ReverseEngineeredVehicle&quot;</span>);
                        VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
                }
        }

        <span class="comment">// #368: refund hijackers</span>
        <span class="keywordflow">if</span>(Vehicle-&gt;HijackerInfantryType != -1) {
                <span class="keywordflow">if</span>(InfantryTypeClass *Hijacker = InfantryTypeClass::Array-&gt;GetItem(Vehicle-&gt;HijackerInfantryType)) {
                        <span class="keywordtype">int</span> refund = Hijacker-&gt;GetRefund(Vehicle-&gt;Owner, 0);
                        Grinder-&gt;Owner-&gt;GiveMoney(refund);
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e9c32cac2382e5c8dee05cc0ecb9d8d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a6e9c32cac2382e5c8dee05cc0ecb9d8d" args="(5198AD, InfantryClass_UpdatePosition_EnteredGrinder, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5198AD&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_UpdatePosition_EnteredGrinder&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(InfantryClass *, Infantry, ESI);
        GET(BuildingClass *, Grinder, EBX);

        <a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a> *pData = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Grinder);

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#aa52160d197643b1ec47982baea06a2cd" title="Returns true if Victim wasn&amp;#39;t buildable and now should be.">ReverseEngineer</a>(Infantry)) {
                <span class="keywordflow">if</span>(Infantry-&gt;Owner-&gt;ControlledByPlayer()) {
                        VoxClass::Play(<span class="stringliteral">&quot;EVA_ReverseEngineeredInfantry&quot;</span>);
                        VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e402fdb2626143d8ba6003f1463e143"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a7e402fdb2626143d8ba6003f1463e143" args="(70E2D2, TechnoClass_IronCurtain_Modify, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">70E2D2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_IronCurtain_Modify&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                       {
        GET(TechnoClass*, pThis, ECX);
        GET(<span class="keywordtype">int</span>, duration, EDX);
        GET_STACK(<span class="keywordtype">bool</span>, force, 0x1C);

        <span class="comment">// if it&#39;s no force shield then it&#39;s the iron curtain.</span>
        <span class="keywordflow">if</span>(!force) {
                <span class="keywordflow">if</span>(<a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.Find(pThis-&gt;GetTechnoType())) {
                        duration = (int)(duration * pData-&gt;IC_Modifier);
                }

                pThis-&gt;IronCurtainTimer.TimeLeft = duration;
                pThis-&gt;IronTintStage = 0;

                <span class="keywordflow">return</span> 0x70E2DB;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aafa2078f776c8e913ae3bc273d86c22d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aafa2078f776c8e913ae3bc273d86c22d" args="(7090A8, TechnoClass_SelectFiringVoice, 0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7090A8&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_SelectFiringVoice&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                      {
        GET(TechnoClass*, pThis, ESI);
        GET(TechnoClass*, pTarget, ECX);

        TechnoTypeClass* pType = pThis-&gt;GetTechnoType();
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a>* pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

        <span class="keywordtype">int</span> idxVoice = -1;

        <span class="keywordtype">int</span> idxWeapon = pThis-&gt;SelectWeapon(pTarget);
        WeaponTypeClass* pWeapon = pThis-&gt;GetWeapon(idxWeapon)-&gt;WeaponType;

        <span class="comment">// repair</span>
        <span class="keywordflow">if</span>(pWeapon &amp;&amp; pWeapon-&gt;Damage &lt; 0) {
                idxVoice = pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#ada99178f709d10d8a1f7238ba8e7d59c">VoiceRepair</a>;
                <span class="keywordflow">if</span>(idxVoice &lt; 0) {
                        <span class="keywordflow">if</span>(!_strcmpi(pType-&gt;ID, <span class="stringliteral">&quot;FV&quot;</span>)) {
                                idxVoice = RulesClass::Instance-&gt;VoiceIFVRepair;
                        }
                }
        }

        <span class="comment">// don&#39;t mix them up, but fall back to rookie voice if there</span>
        <span class="comment">// is no elite voice.</span>
        <span class="keywordflow">if</span>(idxVoice &lt; 0) {
                <span class="keywordflow">if</span>(idxWeapon) {
                        <span class="comment">// secondary    </span>
                        <span class="keywordflow">if</span>(pThis-&gt;Veterancy.IsElite()) {
                                idxVoice = pType-&gt;VoiceSecondaryEliteWeaponAttack;
                        }

                        <span class="keywordflow">if</span>(idxVoice &lt; 0) {
                                idxVoice = pType-&gt;VoiceSecondaryWeaponAttack;
                        }
                } <span class="keywordflow">else</span> {
                        <span class="comment">// primary</span>
                        <span class="keywordflow">if</span>(pThis-&gt;Veterancy.IsElite()) {
                                idxVoice = pType-&gt;VoicePrimaryEliteWeaponAttack;
                        }

                        <span class="keywordflow">if</span>(idxVoice &lt; 0) {
                                idxVoice = pType-&gt;VoicePrimaryWeaponAttack;
                        }
                }
        }

        <span class="comment">// generic attack voice</span>
        <span class="keywordflow">if</span>(idxVoice &lt; 0 &amp;&amp; pType-&gt;VoiceAttack.Count) {
                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idxRandom = Randomizer::Global()-&gt;Random();
                idxVoice = pType-&gt;VoiceAttack.GetItem(idxRandom % pType-&gt;VoiceAttack.Count);
        }

        <span class="comment">// play voice</span>
        <span class="keywordflow">if</span>(idxVoice &gt; -1) {
                pThis-&gt;QueueVoice(idxVoice);
        }

        <span class="keywordflow">return</span> 0x7091C5;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f616db9ba43c9d24272478e82c68ab1"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a3f616db9ba43c9d24272478e82c68ab1" args="(701C97, TechnoClass_ReceiveDamage_AffectsEnemies, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">701C97&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_ReceiveDamage_AffectsEnemies&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WarheadTypeClass *, pThis, EBP);
        GET(TechnoClass *, Victim, ESI);
        LEA_STACK(args_ReceiveDamage *, Arguments, 0xC8);
        <span class="keywordtype">bool</span> CanAffect = <span class="keyword">true</span>;

        <a class="code" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *WHTypeExt = <a class="code" href="class_warhead_type_ext.html#ab2eb86c684fe6f15f9f95a9aa171e7dd">WarheadTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);

        <span class="keywordflow">if</span>(Arguments-&gt;Attacker) {
                <span class="comment">/* Ren, 08.01.2011:</span>
<span class="comment">                        Just documenting how/why this works, since I just stared at it for ten minutes trying to</span>
<span class="comment">                        figure out why this makes sense:</span>
<span class="comment">                        </span>
<span class="comment">                        AffectsEnemies=yes is the default case (weapons usually affect the enemy), so if that&#39;s true,</span>
<span class="comment">                        we can affect the target (this might later be changed by AffectsAllies).</span>
<span class="comment">                        AffectsEnemies=no means we cannot attack enemies, i.e. we can only attack allies;</span>
<span class="comment">                        ergo, CanAffect is only true if victim and target are allied.</span>
<span class="comment">                        Thanks to lazy evaluation, the latter condition is only ever checked if AffectsEnemies is set to no, which is not the default.</span>
<span class="comment">                        </span>
<span class="comment">                        The question of how this works came up because the current treatment of Neutral is technically wrong:</span>
<span class="comment">                        Semantically, AffectsEnemies=no only means &quot;you cannot attack enemies&quot;, but our code renders it as &quot;you cannot attack non-allies&quot;;</span>
<span class="comment">                        this obviously means that AffectsEnemies=no includes being unable to attack Neutral, despite the fact that Neutral is, well, neutral - not our enemy.</span>
<span class="comment">                        </span>
<span class="comment">                        In the specific situation this came up in, the current behavior was desired and no one else complained so far,</span>
<span class="comment">                        so I&#39;m not proposing a change at this point. </span>
<span class="comment">                        In fact, since this flag is AffectsAllies&#39;s evil twin, it is very most likely that practically *all* users of </span>
<span class="comment">                        AffectsEnemies assume this behavior; he who sets AffectsEnemies=no likely does so with the intention of limiting damage to allied troops.</span>
<span class="comment">                        I just wanted this behavior and the logic behind it to be documented for the future.</span>
<span class="comment">                        </span>
<span class="comment">                        Note that, in the specific case of AffectsEnemies=no, AffectsAllies=no, this will rear its ugly head as a bug: Neutral should be affected, but won&#39;t be.</span>
<span class="comment">                 */</span>
                CanAffect = WHTypeExt-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ae92e57b909fd7b771ad4f756220e41cc">AffectsEnemies</a> || Victim-&gt;Owner-&gt;IsAlliedWith(Arguments-&gt;Attacker-&gt;Owner);

<span class="preprocessor">#ifdef DEBUGBUILD</span>
<span class="preprocessor"></span>                <span class="keywordflow">if</span>(Arguments-&gt;Attacker-&gt;Owner != Arguments-&gt;SourceHouse) {
                        Debug::Log(<span class="stringliteral">&quot;Info: During AffectsEnemies parsing, Attacker&#39;s Owner was %p [%s], but SourceHouse was %p [%s].&quot;</span>,
                                Arguments-&gt;Attacker-&gt;Owner,
                                (Arguments-&gt;Attacker-&gt;Owner ? Arguments-&gt;Attacker-&gt;Owner-&gt;Type-&gt;ID : <span class="stringliteral">&quot;null&quot;</span>),
                                Arguments-&gt;SourceHouse,
                                (Arguments-&gt;SourceHouse ? Arguments-&gt;SourceHouse-&gt;Type-&gt;ID : <span class="stringliteral">&quot;null&quot;</span>)
                                );
                        <a class="code" href="class_debug.html#acd0bbec3e1aae30d7b425ddacddb3eb4">Debug::DumpStack</a>(R, 0x180, 0xC0);
                }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Arguments-&gt;SourceHouse) {
                <span class="comment">// fallback, in case future ways of damage dealing don&#39;t include an attacker, e.g. stuff like GenericWarhead</span>
                CanAffect = WHTypeExt-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ae92e57b909fd7b771ad4f756220e41cc">AffectsEnemies</a> || Victim-&gt;Owner-&gt;IsAlliedWith(Arguments-&gt;SourceHouse);

        } <span class="keywordflow">else</span> {
                <span class="comment">//Debug::Log(&quot;Warning: Neither Attacker nor SourceHouse were set during AffectsEnemies parsing!&quot;);</span>
                <span class="comment">// this is often the case for ownerless damage i.e. crates/fire particles, no point in logging it</span>
        }

        <span class="keywordflow">return</span> CanAffect ? 0 : 0x701CC2;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1120d23c1795a6a77541bac64c7a5442"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a1120d23c1795a6a77541bac64c7a5442" args="(4DAA68, FootClass_Update_MoveSound, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4DAA68&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FootClass_Update_MoveSound&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(FootClass *, F, ESI);
        <span class="keywordflow">if</span>(F-&gt;unknown_bool_53C) {
                <span class="keywordflow">return</span> 0x4DAAEE;
        }
        <span class="keywordflow">if</span>(F-&gt;LocomotorSource) {
                F-&gt;Audio7.ShutUp();
                <span class="keywordflow">return</span> 0x4DAAEE;
        }
        <span class="keywordflow">return</span> 0x4DAA70;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef49e7beec4db73c32f8c8b207908081"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aef49e7beec4db73c32f8c8b207908081" args="(7101CF, FootClass_ImbueLocomotor, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7101CF&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FootClass_ImbueLocomotor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(FootClass *, F, ESI);
        F-&gt;Audio7.ShutUp();
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a70a006bd12a9751219642fe7aa112f0d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a70a006bd12a9751219642fe7aa112f0d" args="(41668B, AircraftClass_ReceiveDamage, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">41668B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AircraftClass_ReceiveDamage&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(AircraftClass *, a, ESI);
        GET_STACK(TechnoClass *, Killer, 0x28);
        GET_STACK(<span class="keywordtype">int</span>, ignoreDefenses, 0x20);
        <span class="keywordtype">bool</span> select = a-&gt;IsSelected &amp;&amp; a-&gt;Owner-&gt;ControlledByPlayer();
        <a class="code" href="class_techno_ext.html#a58124d749f052ddab5805e03c507e96d">TechnoExt::SpawnSurvivors</a>(a, Killer, select, ignoreDefenses != 0);

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a33d52d40d6d585376ca84626f186a0ae"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a33d52d40d6d585376ca84626f186a0ae" args="(5215F9, InfantryClass_UpdateDeploy, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5215F9&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_UpdateDeploy&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, I, ESI);
        <span class="keywordflow">return</span> <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType())-&gt;Is_Deso ? 0x5216B6 : 0x52160D;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab142f7b86b89d00859a19cd60b4818b2"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ab142f7b86b89d00859a19cd60b4818b2" args="(747BBD, UnitTypeClass_LoadFromINI, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">747BBD&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitTypeClass_LoadFromINI&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(UnitTypeClass *, U, ESI);

        U-&gt;AltImage = R-&gt;EAX&lt;SHPStruct *&gt;(); <span class="comment">// jumping over, so replicated</span>
        <span class="keywordflow">return</span> U-&gt;Gunner
                ? 0x747BD7
                : 0x747E90;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0db1f91ecacb2c2aeb12e1df209f903"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aa0db1f91ecacb2c2aeb12e1df209f903" args="(6F9E76, TechnoClass_Update_CheckOperators, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F9E76&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Update_CheckOperators&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TechnoClass::Update is called every frame; returning 0 tells it to execute the original function's code as well. </p>
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, pThis, ESI); <span class="comment">// object this is called on</span>
        <span class="comment">//TechnoTypeClass *Type = pThis-&gt;GetTechnoType();</span>
        <span class="comment">//TechnoTypeExt::ExtData *pTypeData = TechnoTypeExt::ExtMap.Find(Type);</span>
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis-&gt;GetTechnoType());
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);

        <span class="comment">// Related to operators/drivers, issue #342</span>
        BuildingClass * pTheBuildingBelow = pThis-&gt;GetCell()-&gt;GetBuilding();

        <span class="comment">/* Conditions checked:</span>
<span class="comment">                - Is there no building below us</span>
<span class="comment">                OR</span>
<span class="comment">                - Is this the building on this cell AND is it online</span>
<span class="comment"></span>
<span class="comment">                pTheBuildingBelow will be NULL if no building was found</span>
<span class="comment">                This check ensures that Operator&#39;d units don&#39;t Deactivate above structures such as War Factories, Repair Depots or Battle Bunkers.</span>
<span class="comment">                (Which is potentially abusable, but let&#39;s hope no one figures that out.)</span>
<span class="comment">        */</span>
        <span class="keywordflow">if</span>(!pTheBuildingBelow || ((pTheBuildingBelow == pThis) &amp;&amp; (pTheBuildingBelow-&gt;IsPowerOnline()))) {
                <span class="keywordtype">bool</span> Override = <span class="keyword">false</span>;
                <span class="keywordflow">if</span>(FootClass *pFoot = generic_cast&lt;FootClass*&gt;(pThis)) {
                        <span class="keywordflow">if</span>(!pTheBuildingBelow) {
                                <span class="comment">// immobile, though not disabled. like hover tanks after</span>
                                <span class="comment">// a repair depot has been sold or warped away.</span>
                                Override = (pFoot-&gt;Locomotor-&gt;Is_Powered() == pThis-&gt;Deactivated);
                        }
                }

                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1b88dd67b98261ab28662d7c4574dc5e">IsOperated</a>()) { <span class="comment">// either does have an operator or doesn&#39;t need one, so...</span>
                        <span class="keywordflow">if</span>( (pThis-&gt;Deactivated &amp;&amp; pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#af67664c98137d949a09602a01f44f0c8">IsPowered</a>() &amp;&amp; !pThis-&gt;IsUnderEMP()) || Override ) { <span class="comment">// ...if it&#39;s currently off, turn it on! (oooh baby)</span>
                                pThis-&gt;Reactivate();
                                pThis-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>; <span class="comment">// #885</span>
                        }
                } <span class="keywordflow">else</span> { <span class="comment">// doesn&#39;t have an operator, so...</span>
                        <span class="keywordflow">if</span>(!pThis-&gt;Deactivated) { <span class="comment">// ...if it&#39;s not off yet, turn it off!</span>
                                pThis-&gt;Deactivate();
                                pThis-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>; <span class="comment">// #885</span>
                        }
                }
        }

        <span class="comment">// prevent disabled units from driving around.</span>
        <span class="keywordflow">if</span>(pThis-&gt;Deactivated) {
                <span class="keywordflow">if</span>(UnitClass* pUnit = specific_cast&lt;UnitClass*&gt;(pThis)) {
                        <span class="keywordflow">if</span>(pUnit-&gt;Locomotor-&gt;Is_Moving() &amp;&amp; pUnit-&gt;Destination &amp;&amp; !pThis-&gt;LocomotorSource) {
                                pUnit-&gt;SetDestination(NULL, <span class="keyword">true</span>);
                                pUnit-&gt;StopMoving();
                        }
                }

                <span class="comment">// dropping Radar Jammers (#305) here for now; should check if another TechnoClass::Update hook might be better ~Ren</span>
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) { <span class="comment">// RadarJam should only be non-null if the object is an active radar jammer</span>
                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#a0f19799beebd05e67631d3bc6b8af84e" title="Unregisters this Jammer on all structures.">UnjamAll</a>();
                }
        } <span class="keywordflow">else</span> {
                <span class="comment">// dropping Radar Jammers (#305) here for now; should check if another TechnoClass::Update hook might be better ~Ren</span>
                <span class="keywordflow">if</span>(!!pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a53b845b45ac6fcd8bef51266ae5751fd" title="Distance in cells to scan for &amp;amp; jam radars.">RadarJamRadius</a>) {
                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) {
                                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a> = <span class="keyword">new</span> <a class="code" href="class_jammer_class.html">JammerClass</a>(pThis, pData);
                        }

                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#afd66d022f035fc202ce20ddc5d1cbadd" title="Updates this Jammer&amp;#39;s status on all eligible structures.">Update</a>();
                }
        }

        <span class="comment">/*      using 0x6F9E7C instead makes this function override the original game one&#39;s entirely -</span>
<span class="comment">                don&#39;t activate that unless you handle _everything_ originally handled by the game */</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ff690907f5a3608a85cd956e6c48752"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a0ff690907f5a3608a85cd956e6c48752" args="(51F76D, InfantryClass_Unload, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">51F76D&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_Unload&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, I, ESI);
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType());
        <span class="keywordflow">return</span> pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a326087b571b4e91e6c0056bb039c43d5">Is_Deso</a> ? 0x51F77D : 0x51F792;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15954c73670d3ad0e2f80209d852310c"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a15954c73670d3ad0e2f80209d852310c" args="(6F3330, TechnoClass_SelectWeapon, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F3330&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_SelectWeapon&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, pThis, ECX);
        GET_STACK(TechnoClass *, pTarg, 0x4);

<span class="comment">//      DWORD Selected = TechnoClassExt::SelectWeaponAgainst(pThis, pTarg);</span>
<span class="comment">//      R-&gt;EAX(Selected);</span>
<span class="comment">//      return 0x6F3813;</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9bb2ad6ab82eb357e8bcf1886bc96ed6"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a9bb2ad6ab82eb357e8bcf1886bc96ed6" args="(629804, ParasiteClass_UpdateSquiddy, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">629804&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParasiteClass_UpdateSquiddy&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, T, ECX);
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
        R-&gt;EAX&lt;WeaponStruct *&gt;(W);
        <span class="keywordflow">return</span> 0x62980D;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8e83759985dcf0df54e8a2629684cbe"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ab8e83759985dcf0df54e8a2629684cbe" args="(62A7B1, Parasite_ExitUnit, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">62A7B1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Parasite_ExitUnit&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, T, ECX);
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
        R-&gt;EAX&lt;WeaponStruct *&gt;(W);
        <span class="keywordflow">return</span> 0x62A7BA;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a690915a1cdca7277ad678c826d14948d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a690915a1cdca7277ad678c826d14948d" args="(62A020, ParasiteClass_Update, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">62A020&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParasiteClass_Update&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, T, ECX);
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
        R-&gt;EAX&lt;WeaponStruct *&gt;(W);
        <span class="keywordflow">return</span> 0x62A02A;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aabf5552f50b8928c1f1798f97aee21cf"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aabf5552f50b8928c1f1798f97aee21cf" args="(71AB30, TemporalClass_GetHelperDamage, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">71AB30&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TemporalClass_GetHelperDamage&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TemporalClass *, Temp, ESI);
        TechnoClass *T = Temp-&gt;Owner;
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a>);
        R-&gt;EAX&lt;WeaponStruct *&gt;(W);
        <span class="keywordflow">return</span> 0x71AB47;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae0f1defc31626b66e4bc7b0f09bfe4dc"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae0f1defc31626b66e4bc7b0f09bfe4dc" args="(71A860, TemporalClass_UpdateA, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">71A860&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TemporalClass_UpdateA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TemporalClass *, Temp, ESI);
        TechnoClass *T = Temp-&gt;Owner;
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a>);
        R-&gt;EAX&lt;WeaponStruct *&gt;(W);
        <span class="keywordflow">return</span> 0x71A876;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc0737ed0307ee5550a05c5617e50b84"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="acc0737ed0307ee5550a05c5617e50b84" args="(6F4103, TechnoClass_Init_2, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F4103&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Init_2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> 0x6F41C0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef5a5b0690d127c18100c282b8d23b37"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aef5a5b0690d127c18100c282b8d23b37" args="(6F407D, TechnoClass_Init_1, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F407D&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Init_1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, T, ESI);
        TechnoTypeClass * Type = T-&gt;GetTechnoType();
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Type);

        CaptureManagerClass *Capturer = NULL;
        ParasiteClass *Parasite = NULL;
        TemporalClass *Temporal = NULL;

        FootClass *F = generic_cast&lt;FootClass *&gt;(T);
        <span class="keywordtype">bool</span> IsFoot = (F != NULL);

<span class="comment">//      for(int i = 0; i &lt; pTypeData-&gt;Weapons.get_Count(); ++i) {</span>
<span class="comment">//              WeaponStruct *W = &amp;pTypeData-&gt;Weapons[i];</span>
        TechnoTypeClass *TT = T-&gt;GetTechnoType();
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 18; ++i) {
                WeaponTypeClass *W1 = TT-&gt;get_Weapon(i);
                WeaponTypeClass *W2 = TT-&gt;get_EliteWeapon(i);
                <span class="keywordflow">if</span>(!W1 &amp;&amp; !W2) {
                        <span class="keywordflow">continue</span>;
                }
                WarheadTypeClass *WH1 = W1 ? W1-&gt;Warhead : NULL;
                WarheadTypeClass *WH2 = W2 ? W2-&gt;Warhead : NULL;

                <span class="keywordflow">if</span>((W1 &amp;&amp; !WH1) || (W2 &amp;&amp; !WH2)) {
                        <a class="code" href="class_debug.html#af5877607385240e065c60bed324530ff">Debug::FatalErrorAndExit</a>(
                                <span class="stringliteral">&quot;Constructing an instance of [%s]:\r\n%sWeapon %s (slot %d) has no Warhead!&quot;</span>,
                                        Type-&gt;ID,
                                        WH1 ? <span class="stringliteral">&quot;Elite &quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
                                        (WH1 ? W2 : W1)-&gt;ID,
                                        i);
                }

                <span class="keywordflow">if</span>(WH1 &amp;&amp; WH1-&gt;MindControl &amp;&amp; Capturer == NULL) {
                        GAME_ALLOC(CaptureManagerClass, Capturer, T, W1-&gt;Damage, W1-&gt;InfiniteMindControl);
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(WH2 &amp;&amp; WH2-&gt;MindControl &amp;&amp; Capturer == NULL) {
                        GAME_ALLOC(CaptureManagerClass, Capturer, T, W2-&gt;Damage, W2-&gt;InfiniteMindControl);
                }

                <span class="keywordflow">if</span>(WH1 &amp;&amp; WH1-&gt;Temporal &amp;&amp; Temporal == NULL) {
                        GAME_ALLOC(TemporalClass, Temporal, T);
                        Temporal-&gt;WarpPerStep = W1-&gt;Damage;
                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a> = (BYTE)i;
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(WH2 &amp;&amp; WH2-&gt;Temporal &amp;&amp; Temporal == NULL) {
                        GAME_ALLOC(TemporalClass, Temporal, T);
                        Temporal-&gt;WarpPerStep = W2-&gt;Damage;
                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a> = (BYTE)i;
                }

                <span class="keywordflow">if</span>((WH1 &amp;&amp; WH1-&gt;Parasite || WH2 &amp;&amp; WH2-&gt;Parasite) &amp;&amp; IsFoot &amp;&amp; Parasite == NULL) {
                        GAME_ALLOC(ParasiteClass, Parasite, F);
                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a> = (BYTE)i;
                }
        }

        T-&gt;CaptureManager = Capturer;
        T-&gt;TemporalImUsing = Temporal;
        <span class="keywordflow">if</span>(IsFoot) {
                F-&gt;ParasiteImUsing = Parasite;
        }

        <span class="keywordflow">return</span> 0x6F4102;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace5cdc882a4a8947ccf6b805ddf1f436"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ace5cdc882a4a8947ccf6b805ddf1f436" args="(415DF6, AircraftClass_Paradrop_Carryall, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">415DF6&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AircraftClass_Paradrop_Carryall&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(FootClass *, pTechno, ESI);
        pTechno-&gt;IsOnCarryall = <span class="keyword">false</span>;
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a259774c2bd85df6f7e14a49b18d44434"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a259774c2bd85df6f7e14a49b18d44434" args="(415CA6, AircraftClass_Paradrop, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">415CA6&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AircraftClass_Paradrop&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(AircraftClass *, A, EDI);
        GET(FootClass *, P, ESI);
        <span class="keywordflow">if</span>(P-&gt;WhatAmI() != abs_Unit) {
                <span class="keywordflow">return</span> 0;
        }
        CoordStruct SrcXYZ;
        A-&gt;GetCoords(&amp;SrcXYZ);
        LEA_STACK(CoordStruct *, XYZ, 0x20);
        XYZ-&gt;X = (SrcXYZ.X &amp; ~0xFF) + 0x80;
        XYZ-&gt;Y = (SrcXYZ.Y &amp; ~0xFF) + 0x80;
        XYZ-&gt;Z = SrcXYZ.Z - 1;
        R-&gt;ECX&lt;CoordStruct *&gt;(XYZ);
        <span class="keywordflow">return</span> 0x415DE3;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af17380fb9c25530b62b125542e6dcdc4"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="af17380fb9c25530b62b125542e6dcdc4" args="(51CE9A, InfantryClass_Idle, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">51CE9A&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_Idle&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(InfantryClass *, I, ESI);
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType());

        <span class="comment">// don&#39;t play idle when paralyzed</span>
        <span class="keywordflow">if</span>(I-&gt;IsUnderEMP()) {
                R-&gt;BL(<span class="keyword">false</span>);
                <span class="keywordflow">return</span> 0x51CECD;
        }

        R-&gt;EDI(R-&gt;EAX()); <span class="comment">// argh</span>
        R-&gt;BL(pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a30f8bc4af232e93bde8bdb3defa88123">Is_Cow</a>); <span class="comment">// aaaargh! again!</span>
        <span class="keywordflow">return</span> pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a30f8bc4af232e93bde8bdb3defa88123">Is_Cow</a> ? 0x51CEAE : 0x51CECD;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3bf7463228e453cd6dfd9eed3f2144ff"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a3bf7463228e453cd6dfd9eed3f2144ff" args="(6F9E50, TechnoClass_Update, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F9E50&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Update&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(TechnoClass *, Source, ECX);

        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Source);
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Source-&gt;GetTechnoType());

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.IsDone()) {
                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.Stop();
                Source-&gt;Cloakable = Source-&gt;GetTechnoType()-&gt;Cloakable;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.GetTimeLeft() &gt; 0) {
                Source-&gt;Cloakable = 0;
        }

        <span class="comment">// #1208</span>
        <span class="keywordflow">if</span>(pTypeData) {
                <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aaa5688b5487c554f856cff329e222307" title="Whether this unit&amp;#39;s turret changes based on the number of people in its passenger hold...">PassengerTurret</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        <span class="comment">// 18 = 1 8 = A H = Adolf Hitler. Clearly we can&#39;t allow it to come to that.</span>
                        <span class="keywordtype">int</span> passengerNumber = (Source-&gt;Passengers.NumPassengers &lt;= 17) ? Source-&gt;Passengers.NumPassengers : 17;
                        <span class="keywordtype">int</span> maxTurret = Source-&gt;GetTechnoType()-&gt;TurretCount - 1;
                        Source-&gt;CurrentTurretNumber = (passengerNumber &lt;= maxTurret) ? passengerNumber : maxTurret;
                }
        }
        
        <span class="comment">// #617 powered units</span>
        <span class="keywordflow">if</span>( pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a4be983a59d472007af69684202df5059" title="The buildingtype this unit is powered by or NULL.">PoweredBy</a>.Count ) {
                <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a>) {
                        pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a> = <span class="keyword">new</span> <a class="code" href="class_powered_unit_class.html">PoweredUnitClass</a>(Source, pTypeData);
                }
                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#add2eed0efa3844809fa2b3be61f10a6d">PoweredUnit</a>-&gt;<a class="code" href="class_powered_unit_class.html#a6a2e94e802cb80b2cd234c61c90ba3a7" title="Whether the unit has a building providing power. NOT the same as being online.">Update</a>();
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7706437ae83f93b9655a4d741ef73b1f"></a><!-- doxytag: member="Hooks.cpp::EXPORT_FUNC" ref="a7706437ae83f93b9655a4d741ef73b1f" args="(InfantryClass_UpdateDeploy2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_FUNC </td>
          <td>(</td>
          <td class="paramtype">InfantryClass_UpdateDeploy2&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
<span class="comment">/*</span>
<span class="comment">        GET(TechnoClass *, I, ESI);</span>
<span class="comment">        TechnoTypeClassExt::TechnoTypeClassData *pData = TechnoTypeClassExt::Ext_p[I-&gt;GetTechnoType()];</span>
<span class="comment">        return pData-&gt;Is_Deso_Radiation ? 0x52139A : 0x5214B9;</span>
<span class="comment">        WRONG: needs more code to reimplement weapon shooting without rad checks</span>
<span class="comment">*/</span>
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 17 2011 23:42:31 for Ares by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
