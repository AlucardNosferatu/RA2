<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: src/Ext/WeaponType/Hooks.Wave.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ares</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_61edef5b85f25cd5be6bbdff5e99e478.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_de16222cf794c2cbeaf77d0392606035.html">Ext</a>      </li>
      <li class="navelem"><a class="el" href="dir_f4f64a627131195305cd70b4dfcc2e6c.html">WeaponType</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Hooks.Wave.cpp File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_weapon_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_techno_2_body_8h.html">../Techno/Body.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a2939fe46ddddf81787f08b88418a09df">upcolor</a>(c)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ade7f7c96725c002927f794f8bdfaa73d">DEFINE_HOOK</a> (6FF5F5, TechnoClass_Fire, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a61852186e976a43a9061e34226c0fc03">DEFINE_HOOK</a> (75E963, WaveClass_CTOR, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ae33dbc0db02b6347d432d6f9e4e30bef">DEFINE_HOOK</a> (763226, WaveClass_DTOR, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a80dadc1a330e76d99f58ea2ed7ca8f29">DEFINE_HOOK</a> (760F50, WaveClass_Update, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#aba3db0b3bd9dbbed3844e74a19c95277">DEFINE_HOOK</a> (760BC2, WaveClass_Draw2, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a243a830bcaf647dec3f0cede38b79495">DEFINE_HOOK</a> (760DE2, WaveClass_Draw3, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#aa61d82316bc3c1e02e25ba73d08449d3">DEFINE_HOOK</a> (75EE57, WaveClass_Draw_Sonic, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a246be02698c144d4fac0b75979e39658">DEFINE_HOOK</a> (7601FB, WaveClass_Draw_Magnetron, 0B)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ac3f7a6f2fe57b281c64ab5e1720f0c14">DEFINE_HOOK</a> (760286, WaveClass_Draw_Magnetron2, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ae60450ec6f6d0cd5a2fa73abf209d49f">DEFINE_HOOK</a> (762C5C, WaveClass_Update_Wave, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ac15d1f44a3e320d2f6614f97c15a1d98">DEFINE_HOOK</a> (75F38F, WaveClass_DamageCell, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a908a5a8daca214c6eb167554d15dcb46">DEFINE_HOOK</a> (7601C7, WaveClass_Draw_Purple, 8)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a2939fe46ddddf81787f08b88418a09df"></a><!-- doxytag: member="Hooks.Wave.cpp::upcolor" ref="a2939fe46ddddf81787f08b88418a09df" args="(c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define upcolor</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordtype">int</span> _ ## c = initial. c + (Intensity * CurrentColor-&gt; c ) / 256; \
        _ ## c = std::min(_ ## c, 255); \
        modified. c = (BYTE)_ ## c;
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ade7f7c96725c002927f794f8bdfaa73d"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ade7f7c96725c002927f794f8bdfaa73d" args="(6FF5F5, TechnoClass_Fire, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6FF5F5&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Fire&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WeaponTypeClass *, Source, EBX);
        GET(TechnoClass *, Owner, ESI);
        GET(TechnoClass *, Target, EDI);

        <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a6e448392133b3079a9490b5c5fabdd09">WeaponTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Source);

        RET_UNLESS(Source-&gt;IsMagBeam || Source-&gt;IsSonic || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4d411d085aad9c2a200181a528087b90">Wave_IsLaser</a> || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a>);

        GET_BASE(byte, idxWeapon, 0xC);

        <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner)-&gt;idxSlot_Wave = idxWeapon;

        RET_UNLESS(pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4d411d085aad9c2a200181a528087b90">Wave_IsLaser</a> || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a>);

        LEA_STACK(CoordStruct *, xyzSrc, 0x44);
        LEA_STACK(CoordStruct *, xyzTgt, 0x88);

        WaveClass *Wave;
        GAME_ALLOC(WaveClass, Wave, xyzSrc, xyzTgt, Owner, pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a> ? 2 : 1, Target);

        <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave] = pData;
        Owner-&gt;Wave = Wave;
        <span class="keywordflow">return</span> 0x6FF650;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a908a5a8daca214c6eb167554d15dcb46"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a908a5a8daca214c6eb167554d15dcb46" args="(7601C7, WaveClass_Draw_Purple, 8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7601C7&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Purple&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(<span class="keywordtype">int</span>, Q, EDX);
        <span class="keywordflow">if</span>(Q &gt; 0x15F90) {
                Q = 0x15F90;
        }
        R-&gt;EDX(Q);
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac15d1f44a3e320d2f6614f97c15a1d98"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ac15d1f44a3e320d2f6614f97c15a1d98" args="(75F38F, WaveClass_DamageCell, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75F38F&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_DamageCell&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, EBP);
        <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave];
        R-&gt;EDI(R-&gt;EAX());
        R-&gt;EBX(pData-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>);
        <span class="keywordflow">return</span> 0x75F39D;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae60450ec6f6d0cd5a2fa73abf209d49f"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ae60450ec6f6d0cd5a2fa73abf209d49f" args="(762C5C, WaveClass_Update_Wave, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">762C5C&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Update_Wave&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, ESI);
        TechnoClass *Firer = Wave-&gt;Owner;
        TechnoClass *Target = Wave-&gt;Target;
        <span class="keywordflow">if</span>(!Target || !Firer) {
                <span class="keywordflow">return</span> 0x762D57;
        }

        RET_UNLESS(<a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.find(Wave) != <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.end());
        <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave];
        <span class="keywordtype">int</span> weaponIdx = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Firer)-&gt;idxSlot_Wave;

        CoordStruct xyzSrc, xyzTgt, xyzDummy = {0, 0, 0};
        Firer-&gt;GetFLH(&amp;xyzSrc, weaponIdx, xyzDummy);
        Target-&gt;GetCoords__(&amp;xyzTgt); <span class="comment">// not GetCoords() !</span>

        <span class="keywordtype">char</span> idx = <a class="code" href="class_weapon_type_ext.html#abe46cab9ba684690723b88a54a83a14e">WeaponTypeExt:: AbsIDtoIdx</a>(Target-&gt;WhatAmI());

        <span class="keywordtype">bool</span> reversed = pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4420845c77e59a4300f03f619a94da6e">Wave_Reverse</a>[idx];

        <span class="keywordflow">if</span>(Wave-&gt;Type == wave_Magnetron) {
                reversed
                        ? Wave-&gt;Draw_Magnetic(&amp;xyzTgt, &amp;xyzSrc)
                        : Wave-&gt;Draw_Magnetic(&amp;xyzSrc, &amp;xyzTgt);
        } <span class="keywordflow">else</span> {
                reversed
                        ? Wave-&gt;Draw_NonMagnetic(&amp;xyzTgt, &amp;xyzSrc)
                        : Wave-&gt;Draw_NonMagnetic(&amp;xyzSrc, &amp;xyzTgt);
        }

        <span class="keywordflow">return</span> 0x762D57;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3f7a6f2fe57b281c64ab5e1720f0c14"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ac3f7a6f2fe57b281c64ab5e1720f0c14" args="(760286, WaveClass_Draw_Magnetron2, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760286&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Magnetron2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> 0x7602D3;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a246be02698c144d4fac0b75979e39658"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a246be02698c144d4fac0b75979e39658" args="(7601FB, WaveClass_Draw_Magnetron, 0B)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7601FB&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Magnetron&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0B&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET_STACK(WaveClass *, Wave, 0x8);
        GET(DWORD, src, EBX);
        GET(DWORD, offset, ECX);
        DWORD offs = src + offset * 2;

        <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>((WORD *)offs, (WORD *)src, R-&gt;EBP(), Wave))
                ? 0x760285
                : 0
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa61d82316bc3c1e02e25ba73d08449d3"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="aa61d82316bc3c1e02e25ba73d08449d3" args="(75EE57, WaveClass_Draw_Sonic, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75EE57&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Sonic&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET_STACK(WaveClass *, Wave, 0x4);
        GET(DWORD, src, EDI);
        GET(DWORD, offset, ECX);
        DWORD offs = src + offset * 2;

        <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>((WORD *)offs, (WORD *)src, R-&gt;ESI(), Wave))
                ? 0x75EF1C
                : 0
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a243a830bcaf647dec3f0cede38b79495"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a243a830bcaf647dec3f0cede38b79495" args="(760DE2, WaveClass_Draw3, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760DE2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw3&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, EBX);
        GET(WORD *, dest, EDI);

        <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>(dest, dest, Wave-&gt;LaserIntensity, Wave))
                ? 0x760ECB
                : 0
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aba3db0b3bd9dbbed3844e74a19c95277"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="aba3db0b3bd9dbbed3844e74a19c95277" args="(760BC2, WaveClass_Draw2, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760BC2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, EBX);
        GET(WORD *, dest, EBP);

        <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>(dest, dest, Wave-&gt;LaserIntensity, Wave))
                ? 0x760CAF
                : 0
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a80dadc1a330e76d99f58ea2ed7ca8f29"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a80dadc1a330e76d99f58ea2ed7ca8f29" args="(760F50, WaveClass_Update, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760F50&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Update&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, pThis, ECX);

        <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[pThis];
        <span class="keyword">const</span> WeaponTypeClass *Weap = pData-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;

        RET_UNLESS(Weap);

        <span class="keywordtype">int</span> Intensity;

        <span class="keywordflow">if</span>(Weap-&gt;AmbientDamage) {
                CoordStruct coords;
<span class="comment">//              Debug::Log(&quot;Damaging Cells for weapon %X (Intensity = %d)\n&quot;, pData, pThis-&gt;WaveIntensity);</span>
                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; pThis-&gt;Cells.Count; ++i) {
                        CellClass *Cell = pThis-&gt;Cells.GetItem(i);
<span class="comment">//                      Debug::Log(&quot;\t(%hd,%hd)\n&quot;, Cell-&gt;MapCoords.X, Cell-&gt;MapCoords.Y);</span>
                        pThis-&gt;DamageArea(Cell-&gt;Get3DCoords3(&amp;coords));
                }
<span class="comment">//              Debug::Log(&quot;Done damaging %X\n&quot;, pData);</span>
        }

        <span class="keywordflow">switch</span>(pThis-&gt;Type) {
                <span class="keywordflow">case</span> wave_Sonic:
                        pThis-&gt;Update_Wave();
                        Intensity = pThis-&gt;WaveIntensity;
                        --Intensity;
                        pThis-&gt;WaveIntensity = Intensity;
                        <span class="keywordflow">if</span>(Intensity &lt; 0) {
                                pThis-&gt;UnInit();
                        } <span class="keywordflow">else</span> {
                                SET_REG32(ECX, pThis);
                                CALL(0x5F3E70); <span class="comment">// ObjectClass::Update</span>
                        }
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> wave_BigLaser:
                <span class="keywordflow">case</span> wave_Laser:
                        Intensity = pThis-&gt;LaserIntensity;
                        Intensity -= 6;
                        pThis-&gt;LaserIntensity = Intensity;
                        <span class="keywordflow">if</span>(Intensity &lt; 32) {
                                pThis-&gt;UnInit();
                        }
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> wave_Magnetron:
                        pThis-&gt;Update_Wave();
                        Intensity = pThis-&gt;WaveIntensity;
                        --Intensity;
                        pThis-&gt;WaveIntensity = Intensity;
                        <span class="keywordflow">if</span>(Intensity &lt; 0) {
                                pThis-&gt;UnInit();
                        } <span class="keywordflow">else</span> {
                                SET_REG32(ECX, pThis);
                                CALL(0x5F3E70); <span class="comment">// ObjectClass::Update</span>
                        }
                        <span class="keywordflow">break</span>;
        }

        <span class="keywordflow">return</span> 0x76101A;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae33dbc0db02b6347d432d6f9e4e30bef"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ae33dbc0db02b6347d432d6f9e4e30bef" args="(763226, WaveClass_DTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">763226&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_DTOR&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, EDI);
        hash_waveExt::iterator i = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.find(Wave);
        <span class="keywordflow">if</span>(i != <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.end()) {
                <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.erase(i);
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a61852186e976a43a9061e34226c0fc03"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a61852186e976a43a9061e34226c0fc03" args="(75E963, WaveClass_CTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75E963&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_CTOR&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(WaveClass *, Wave, ESI);
        GET(DWORD, Type, ECX);
        <span class="keywordflow">if</span>(Type == wave_Laser || Type == wave_BigLaser) {
                <span class="keywordflow">return</span> 0;
        }
        GET(WeaponTypeClass *, Weapon, EBX);

        <span class="keywordflow">if</span>(Weapon) {
                <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a6e448392133b3079a9490b5c5fabdd09">WeaponTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Weapon);
                <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave] = pData;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 17 2011 23:42:31 for Ares by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
