<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: src/Ext/SWType/Hooks.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ares</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_61edef5b85f25cd5be6bbdff5e99e478.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_de16222cf794c2cbeaf77d0392606035.html">Ext</a>      </li>
      <li class="navelem"><a class="el" href="dir_fdcbb5712a4c6dd9e296e1e92aa05590.html">SWType</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Hooks.cpp File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_s_w_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_s_w_types_8h.html">../../Misc/SWTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_house_2_body_8h.html">../House/Body.h</a>&quot;</code><br/>
<code>#include &lt;StringTable.h&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a290d57aa50c2c1e10a6aa18c23173111">DEFINE_HOOK</a> (6CEF84, SuperWeaponTypeClass_GetCursorOverObject, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a3eea3304ed985d38c256286aabe7b0f3">DEFINE_HOOK</a> (653B3A, RadarClass_GetMouseAction_CustomSWAction, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a7522be5b68ce0eac217e656ed47e7766">DEFINE_HOOK</a> (6AAEDF, SidebarClass_ProcessCameoClick_SuperWeapons, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#aa1157d7ef960006eebfab36fed738ac8">DEFINE_HOOK</a> (6A932B, CameoClass_GetTip_MoneySW, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a5f6cd4c86688c420bbb30f335258c7f6">DEFINE_HOOK</a> (6CEE96, SuperWeaponTypeClass_GetTypeIndex, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a455e859bd40b9165bffa91fa7da563ea">DEFINE_HOOK</a> (4AC20C, DisplayClass_LMBUp, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ac1d493727ad7f450573b37d17d497e5c">DEFINE_HOOK</a> (446418, BuildingClass_Place1, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#acd531e440f36070b6ea663462f0786fa">DEFINE_HOOK</a> (44656D, BuildingClass_Place2, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a84da89bc214c91f2e7c0ad9a4a8c385f">DEFINE_HOOK</a> (45100A, BuildingClass_ProcessAnims1, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ada70becba69df99dd2f16e07e16e83ad">DEFINE_HOOK</a> (451132, BuildingClass_ProcessAnims2, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#afa471e749d06a796449987748c54f854">DEFINE_HOOK</a> (446937, BuildingClass_AnnounceSW, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a5ecf96cfea40d93a68b895a4aef48f1d">DEFINE_HOOK</a> (6CBDD7, SuperClass_AnnounceReady, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a7bc1cf7cc39055f8abf002677b907be8">DEFINE_HOOK</a> (6CC0EA, SuperClass_AnnounceQuantity, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a22c31b854daa07ef35c3f0c2cfddfb59">DEFINE_HOOK</a> (50B319, HouseClass_UpdateSWs_ShowCameo, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a342208e1364376c5792d090ef4b7397c">DEFINE_HOOK</a> (50CFAA, HouseClass_PickOffensiveSWTarget, 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ae871ca022ed885e0fb0cf7b8e1032314">DEFINE_HOOK</a> (6CBA9E, SuperClass_ClickFire_Abort, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ae753ad9444b47427a03fdde0574fd27a">DEFINE_HOOK</a> (6CC390, SuperClass_Launch, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a65de78360a67455f25dad7eb2c0e1ab0">DEFINE_HOOK</a> (44691B, BuildingClass_4DC_SWAvailable, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a19271ae61f0110dc178287aef714dfcc">DEFINE_HOOK</a> (45765A, BuildingClass_SWAvailable, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#acb595e9d5e90ebf693149bee9d9d125a">DEFINE_HOOK</a> (4576BA, BuildingClass_SW2Available, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ae1945ac375cae57bf281f870d3932952">DEFINE_HOOK</a> (4FAE72, HouseClass_SWFire_PreDependent, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#aa773f34939d43e47dcf24ffe26e90fc3">DEFINE_HOOK</a> (6CC2B0, SuperClass_NameReadiness, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a67d7e7c97a2b39aac53172ca9859097b">DEFINE_HOOK</a> (5098F0, HouseClass_Update_AI_TryFireSW, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a291904aec41815fb3b3cd2dbc8b252dc">DEFINE_HOOK</a> (4F9004, HouseClass_Update_TrySWFire, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a78623e91b97e1e483b7cf21a51a1f5a9">DEFINE_HOOK</a> (6CBF5B, SuperClass_GetCameoChargeState_ChargeDrainRatio, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a9f5dde9ac580bd9c6d8e75cb5c3b44ec">DEFINE_HOOK</a> (6CC053, SuperClass_GetCameoChargeState_FixFullyCharged, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a85ba1dbaa944d035a047e720aa1cc7a3">DEFINE_HOOK</a> (6CB995, SuperClass_ClickFire_ChargeDrainRatioA, 8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#ae84d85454fd8a4cba5425fefe389b798">DEFINE_HOOK</a> (6CBA19, SuperClass_ClickFire_ChargeDrainRatioB, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a4270cd5133f1720c2f259ee95fc794ee">DEFINE_HOOK</a> (6CBD6B, SuperClass_Update_DrainMoney, 8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_w_type_2_hooks_8cpp.html#a0f5526840cc0c607be4663fb500f5f62">DEFINE_HOOK</a> (6CEEB0, SuperWeaponTypeClass_FindFirstOfAction, 8)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a290d57aa50c2c1e10a6aa18c23173111"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a290d57aa50c2c1e10a6aa18c23173111" args="(6CEF84, SuperWeaponTypeClass_GetCursorOverObject, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CEF84&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperWeaponTypeClass_GetCursorOverObject&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(SuperWeaponTypeClass*, pThis, ECX);

        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);
        <span class="keywordtype">int</span> type = (pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> &gt; -1) ? pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> : pThis-&gt;Type;
        <span class="keywordtype">bool</span> customType = (type &gt;= <a class="code" href="_s_w_type_2_body_8h.html#a6ad9458fa6e603ce35865007ed97f044">FIRST_SW_TYPE</a>);

        <span class="keywordflow">if</span>((pThis-&gt;Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) || customType) {
                GET_STACK(CellStruct *, pMapCoords, 0x0C);

                <span class="keywordtype">int</span> Action = <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>;

                <span class="comment">// prevent firing into shroud</span>
                <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        CellClass* pCell = MapClass::Instance-&gt;GetCellAt(pMapCoords);
                        CoordStruct Crd;

                        <span class="keywordflow">if</span>(MapClass::Instance-&gt;IsLocationShrouded(pCell-&gt;GetCoords(&amp;Crd))) {
                                Action = <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>;
                        }
                }

                <span class="comment">// new SW types have to check whether the coordinates are valid.</span>
                <span class="keywordflow">if</span>(Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) {
                        <span class="keywordflow">if</span>(customType &amp;&amp; !<a class="code" href="class_new_s_w_type.html#a6d958ce28c85b64691c52b374eec1bd3">NewSWType::GetNthItem</a>(type)-&gt;<a class="code" href="class_new_s_w_type.html#a7143e214b7e1f6f900c02d40e3c42134">CanFireAt</a>(pData, pMapCoords)) {
                                Action = <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>;
                        }
                }

                R-&gt;EAX(Action);

                <span class="keywordflow">if</span>(Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) {
                        <a class="code" href="class_s_w_type_ext.html#a37987e17a568804f2f22d1bdd9e2e8d5">SWTypeExt::CurrentSWType</a> = pThis;
                        <a class="code" href="class_actions.html#a85baf38edafaf94b1ac44b03fe01f132">Actions::Set</a>(&amp;pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ac4760afdbaf32db2541c4b10a4102f5e">SW_Cursor</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>());
                } <span class="keywordflow">else</span> {
                        <a class="code" href="class_s_w_type_ext.html#a37987e17a568804f2f22d1bdd9e2e8d5">SWTypeExt::CurrentSWType</a> = NULL;
                        <a class="code" href="class_actions.html#a85baf38edafaf94b1ac44b03fe01f132">Actions::Set</a>(&amp;pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa13c3ad838bb5f0785652587966461c7">SW_NoCursor</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>());
                }
                <span class="keywordflow">return</span> 0x6CEFD9;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f5526840cc0c607be4663fb500f5f62"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a0f5526840cc0c607be4663fb500f5f62" args="(6CEEB0, SuperWeaponTypeClass_FindFirstOfAction, 8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CEEB0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperWeaponTypeClass_FindFirstOfAction&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                               {
        GET(<span class="keywordtype">int</span>, action, ECX);

        R-&gt;EAX(0);

        <span class="comment">// this implementation is as stupid as short sighted, but it should work</span>
        <span class="comment">// for the moment. as there are no actions any more, this has to be</span>
        <span class="comment">// reworked if powerups are expanded. for now, it only has to find a nuke.</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;SuperWeaponTypeClass::Array-&gt;Count; ++i) {
                <span class="keywordflow">if</span>(SuperWeaponTypeClass* pType = SuperWeaponTypeClass::Array-&gt;GetItem(i)) {
                        <span class="keywordflow">if</span>(pType-&gt;Action == action) {
                                R-&gt;EAX(pType);
                                <span class="keywordflow">break</span>;
                        } <span class="keywordflow">else</span> {
                                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pType)) {
                                        <span class="keywordflow">if</span>(pExt-&gt;HandledByNewSWType &gt; -1) {
                                                <span class="keywordflow">if</span>(<a class="code" href="class_new_s_w_type.html">NewSWType</a> *swt = <a class="code" href="class_new_s_w_type.html#a6d958ce28c85b64691c52b374eec1bd3">NewSWType::GetNthItem</a>(pExt-&gt;HandledByNewSWType)) {
                                                        <span class="keywordflow">if</span>(swt-&gt;HandlesType(SuperWeaponType::Nuke)) {
                                                                R-&gt;EAX(pType);
                                                                <span class="keywordflow">break</span>;
                                                        }
                                                }
                                        }
                                }
                        }
                }
        }

        <span class="comment">// put a hint into the debug log to explain why we will crash now.</span>
        <span class="keywordflow">if</span>(!R-&gt;EAX()) {
                <a class="code" href="class_debug.html#af5877607385240e065c60bed324530ff">Debug::FatalErrorAndExit</a>(<span class="stringliteral">&quot;Failed finding an Action=Nuke or Type=MultiMissile super weapon to be granted by ICBM crate.&quot;</span>);
        }

        <span class="keywordflow">return</span> 0x6CEEE5;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4270cd5133f1720c2f259ee95fc794ee"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a4270cd5133f1720c2f259ee95fc794ee" args="(6CBD6B, SuperClass_Update_DrainMoney, 8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CBD6B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_Update_DrainMoney&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                     {
        <span class="comment">// draining weapon active. take or give money. stop, </span>
        <span class="comment">// if player has insufficient funds.</span>
        GET(SuperClass*, pSuper, ESI);
        GET(<span class="keywordtype">int</span>, timeLeft, EAX);

        <span class="keywordflow">if</span>(timeLeft &gt; 0 &amp;&amp; pSuper-&gt;Type-&gt;UseChargeDrain &amp;&amp; pSuper-&gt;ChargeDrainState == 2) {
                <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSuper-&gt;Type)) {
                        <span class="keywordtype">int</span> money = pData-&gt;Money_DrainAmount;
                        <span class="keywordflow">if</span>(money != 0 &amp;&amp; pData-&gt;Money_DrainDelay &gt; 0) {
                                <span class="keywordflow">if</span>(!(timeLeft % pData-&gt;Money_DrainDelay)) {

                                        <span class="comment">// only abort if SW drains money and there is none</span>
                                        <span class="keywordflow">if</span>(pData-&gt;Money_DrainAmount &lt; 0) {
                                                <span class="keywordflow">if</span>(pSuper-&gt;Owner-&gt;Available_Money() &lt; -money) {
                                                        <span class="keywordflow">if</span>(pSuper-&gt;Owner-&gt;IsHumanoid()) {
                                                                VoxClass::PlayIndex(pData-&gt;EVA_InsufficientFunds);
                                                                pData-&gt;PrintMessage(pData-&gt;Message_InsufficientFunds, HouseClass::Player);
                                                        }
                                                        <span class="keywordflow">return</span> 0x6CBD73;
                                                }
                                        }

                                        <span class="comment">// apply drain money</span>
                                        <span class="keywordflow">if</span>(money &gt; 0) {
                                                pSuper-&gt;Owner-&gt;GiveMoney(money);
                                        } <span class="keywordflow">else</span> {
                                                pSuper-&gt;Owner-&gt;TakeMoney(-money);
                                        }
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> (timeLeft ? 0x6CBE7C : 0x6CBD73);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae84d85454fd8a4cba5425fefe389b798"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae84d85454fd8a4cba5425fefe389b798" args="(6CBA19, SuperClass_ClickFire_ChargeDrainRatioB, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CBA19&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_ClickFire_ChargeDrainRatioB&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                               {
        GET(<span class="keywordtype">int</span>, length, EDI);
        GET(SuperClass*, pSuper, ESI);

        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSuper-&gt;Type)) {
                <span class="keywordtype">double</span> ratio = pData-&gt;SW_ChargeToDrainRatio;
                <span class="keywordtype">double</span> remaining = length * ratio;
                <span class="keywordtype">int</span> frames = (int)Game::F2I(remaining);
        
                R-&gt;EAX(frames);
                <span class="keywordflow">return</span> 0x6CBA28;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85ba1dbaa944d035a047e720aa1cc7a3"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a85ba1dbaa944d035a047e720aa1cc7a3" args="(6CB995, SuperClass_ClickFire_ChargeDrainRatioA, 8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CB995&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_ClickFire_ChargeDrainRatioA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                               {
        GET_STACK(<span class="keywordtype">int</span>, rechargeTime, 0x24);
        GET_STACK(<span class="keywordtype">int</span>, timeLeft, 0x20);

        <span class="comment">// recreate the SW from a pointer to its CreationTimer</span>
        GET(SuperClass*, pSuper, ESI);
        pSuper = (SuperClass*)((<span class="keywordtype">char</span>*)pSuper - 30);

        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSuper-&gt;Type)) {
                <span class="keywordtype">double</span> ratio = pData-&gt;SW_ChargeToDrainRatio;
                <span class="keywordtype">double</span> remaining = rechargeTime - timeLeft / ratio;
                <span class="keywordtype">int</span> frames = (int)Game::F2I(remaining);
        
                R-&gt;EAX(frames);
                <span class="keywordflow">return</span> 0x6CB9B0;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f5dde9ac580bd9c6d8e75cb5c3b44ec"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a9f5dde9ac580bd9c6d8e75cb5c3b44ec" args="(6CC053, SuperClass_GetCameoChargeState_FixFullyCharged, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CC053&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_GetCameoChargeState_FixFullyCharged&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                       {
        GET(<span class="keywordtype">int</span>, charge, EAX);

        <span class="comment">// some smartass capped this at 53, causing the last</span>
        <span class="comment">// wedge of darken.shp never to disappear.</span>
        R-&gt;EAX(std::min(charge, 54));
        <span class="keywordflow">return</span> 0x6CC066;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a78623e91b97e1e483b7cf21a51a1f5a9"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a78623e91b97e1e483b7cf21a51a1f5a9" args="(6CBF5B, SuperClass_GetCameoChargeState_ChargeDrainRatio, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CBF5B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_GetCameoChargeState_ChargeDrainRatio&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                        {
        GET_STACK(<span class="keywordtype">int</span>, rechargeTime1, 0x10);
        GET_STACK(<span class="keywordtype">int</span>, rechargeTime2, 0x14);
        GET_STACK(<span class="keywordtype">int</span>, timeLeft, 0xC);
        
        GET(SuperWeaponTypeClass*, pType, EBX);
        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pType)) {

                <span class="comment">// use per-SW charge-to-drain ratio.</span>
                <span class="keywordtype">double</span> percentage = 0.0;
                <span class="keywordtype">double</span> ratio = pData-&gt;SW_ChargeToDrainRatio;
                <span class="keywordflow">if</span>(std::abs(rechargeTime2 * ratio) &gt; 0.001) {
                        percentage = 1.0 - (rechargeTime1 * ratio - timeLeft) / (rechargeTime2 * ratio);
                }

                <span class="comment">// up to 55 steps</span>
                <span class="keywordtype">int</span> charge = (int)Game::F2I(percentage * 54.0);
                R-&gt;EAX(charge);
                <span class="keywordflow">return</span> 0x6CC053;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a291904aec41815fb3b3cd2dbc8b252dc"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a291904aec41815fb3b3cd2dbc8b252dc" args="(4F9004, HouseClass_Update_TrySWFire, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4F9004&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass_Update_TrySWFire&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                    {
        GET(HouseClass*, pThis, ESI);
        <span class="keywordtype">bool</span> isHuman = R-&gt;AL() != 0;

        <span class="keywordflow">if</span>(!isHuman) {
                <span class="keywordflow">if</span>(!pThis-&gt;Type-&gt;MultiplayPassive) {
                        <span class="keywordflow">return</span> 0x4F9015;
                }

        } <span class="keywordflow">else</span> {
                <span class="comment">// update the SWs for human players to support auto firing.</span>
                pThis-&gt;AI_TryFireSW();
        }

        <span class="keywordflow">return</span> 0x4F9038;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67d7e7c97a2b39aac53172ca9859097b"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a67d7e7c97a2b39aac53172ca9859097b" args="(5098F0, HouseClass_Update_AI_TryFireSW, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5098F0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass_Update_AI_TryFireSW&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                       {
        GET(HouseClass*, pThis, ECX);

        <span class="comment">// this method iterates over every available SW and checks</span>
        <span class="comment">// whether it should be fired automatically. the original</span>
        <span class="comment">// method would abort if this house is human-controlled.</span>
        <span class="keywordtype">bool</span> AIFire = !pThis-&gt;IsHumanoid();

        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;pThis-&gt;Supers.Count; ++i) {
                <span class="keywordflow">if</span>(SuperClass* pSuper = pThis-&gt;Supers.GetItem(i)) {
                        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pExt = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSuper-&gt;Type);

                        <span class="comment">// fire if this is AI owned or the SW has auto fire set.</span>
                        <span class="keywordflow">if</span>(AIFire || pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a32419069c7fbeb0548d5ddfbfe01dc23">SW_AutoFire</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {

                                <span class="keywordflow">if</span>(pSuper-&gt;IsCharged) {
                                        CellStruct Cell = HouseClass::DefaultIonCannonCoords;
                                        <span class="keyword">auto</span> LaunchSW = [&amp;](CellStruct *Cell) {
                                                <span class="keywordtype">int</span> idxSW = pThis-&gt;Supers.FindItemIndex(&amp;pSuper);
                                                pThis-&gt;Fire_SW(idxSW, Cell);
                                        };

                                        <span class="comment">// don&#39;t try to fire if we obviously haven&#39;t enough money</span>
                                        <span class="keywordflow">if</span>(pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ae0befc7de00e455ff50792264b822652">Money_Amount</a> &lt; 0) {
                                                <span class="keywordflow">if</span>(HouseClass::Player-&gt;Available_Money() &lt; -pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ae0befc7de00e455ff50792264b822652">Money_Amount</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                                        <span class="keywordflow">continue</span>;
                                                }
                                        }

                                        <span class="comment">// all the different AI targeting modes</span>
                                        <span class="keywordflow">switch</span>(pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a9cbf8841c5e840ada71ae1bbc6e56ef4">SW_AITargetingType</a>.<a class="code" href="class_valueable_enum.html#a49f792a04186075586b54b8535cf59d7">Get</a>()) {
                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496a355a6b286d91b4a15ad20b49933d1fb0">SuperWeaponAITargetingMode::Nuke</a>:
                                                {
                                                        <span class="keywordflow">if</span>(pThis-&gt;EnemyHouseIndex != -1) {
                                                                <span class="keywordflow">if</span>(pThis-&gt;PreferredTargetCell == HouseClass::DefaultIonCannonCoords) {
                                                                        Cell = *(pThis-&gt;PreferredTargetWaypoint == 1
                                                                                ? pThis-&gt;PickIonCannonTarget(Cell)
                                                                                : pThis-&gt;sub_50D170(&amp;Cell, pThis-&gt;PreferredTargetWaypoint));
                                                                } <span class="keywordflow">else</span> {
                                                                        Cell = pThis-&gt;PreferredTargetCell;
                                                                }

                                                                <span class="keywordflow">if</span>(Cell != HouseClass::DefaultIonCannonCoords) {
                                                                        LaunchSW(&amp;Cell);
                                                                }
                                                        }
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496a2bfc86b34c4204460b6c4963b3b855a8">SuperWeaponAITargetingMode::LightningStorm</a>:
                                                {
                                                        pThis-&gt;Fire_LightningStorm(pSuper);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496adee6c2b96b283f15bc1665d53ab5cf54">SuperWeaponAITargetingMode::PsychicDominator</a>:
                                                {
                                                        pThis-&gt;Fire_PsyDom(pSuper);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496a5d5a30c61927f2e6e7778040be214d99">SuperWeaponAITargetingMode::ParaDrop</a>:
                                                {
                                                        pThis-&gt;Fire_ParaDrop(pSuper);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496ae1a29610d1738ca7c6d601a790bc1cbc">SuperWeaponAITargetingMode::GeneticMutator</a>:
                                                {
                                                        pThis-&gt;Fire_GenMutator(pSuper);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496a1ac0a9614911f744a437242a0efe900d">SuperWeaponAITargetingMode::ForceShield</a>:
                                                {
                                                        <span class="keywordflow">if</span>(pThis-&gt;PreferredDefensiveCell2 == HouseClass::DefaultIonCannonCoords) {
                                                                <span class="keywordflow">if</span>(pThis-&gt;PreferredDefensiveCell != HouseClass::DefaultIonCannonCoords
                                                                        &amp;&amp; RulesClass::Instance-&gt;AISuperDefenseFrames + pThis-&gt;PreferredDefensiveCellStartTime &gt; Unsorted::CurrentFrame) {
                                                                        Cell = pThis-&gt;PreferredDefensiveCell;
                                                                }
                                                        } <span class="keywordflow">else</span> {
                                                                Cell = pThis-&gt;PreferredDefensiveCell2;
                                                        }

                                                        <span class="keywordflow">if</span>(Cell != HouseClass::DefaultIonCannonCoords) {
                                                                LaunchSW(&amp;Cell);
                                                                pThis-&gt;PreferredDefensiveCell = HouseClass::DefaultIonCannonCoords;
                                                        }
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496adcc28924672393b9808fb86360430be6">SuperWeaponAITargetingMode::Offensive</a>:
                                                {
                                                        <span class="keywordflow">if</span>(pThis-&gt;EnemyHouseIndex != -1 &amp;&amp; pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a83b7da1f9c60a0c83012755802149397">IsHouseAffected</a>(pThis, HouseClass::Array-&gt;GetItem(pThis-&gt;EnemyHouseIndex))) {
                                                                pThis-&gt;PickIonCannonTarget(Cell);
                                                                <span class="keywordflow">if</span>(Cell != HouseClass::DefaultIonCannonCoords) {
                                                                        LaunchSW(&amp;Cell);
                                                                }
                                                        }
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496ae453e5b6eb0dce94be3d97ab934f5f29">SuperWeaponAITargetingMode::NoTarget</a>:
                                                {
                                                        LaunchSW(&amp;Cell);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496ace70a98e4981c030f30bea9b4744e368">SuperWeaponAITargetingMode::Stealth</a>:
                                                {
                                                        <span class="comment">// find one of the cloaked enemy technos, posing the largest threat.</span>
                                                        DynamicVectorClass&lt;TechnoClass*&gt; list;
                                                        <span class="keywordtype">int</span> currentValue = 0;
                                                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;TechnoClass::Array-&gt;Count; ++j) {
                                                                <span class="keywordflow">if</span>(TechnoClass* pTechno = TechnoClass::Array-&gt;GetItem(j)) {
                                                                        <span class="keywordflow">if</span>(pTechno-&gt;CloakState) {
                                                                                <span class="keywordflow">if</span>(pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a83b7da1f9c60a0c83012755802149397">IsHouseAffected</a>(pThis, pTechno-&gt;Owner)) {
                                                                                        <span class="keywordflow">if</span>(pExt-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a4d106d1e314357b53b740cff262c6061">IsTechnoAffected</a>(pTechno)) {
                                                                                                <span class="keywordtype">int</span> thisValue = pTechno-&gt;GetTechnoType()-&gt;ThreatPosed;
                                                                                                <span class="keywordflow">if</span>(currentValue &lt; thisValue) {
                                                                                                        list.Clear();
                                                                                                        currentValue = thisValue;
                                                                                                }
                                                                                                <span class="keywordflow">if</span>(currentValue == thisValue) {
                                                                                                        list.AddItem(pTechno);
                                                                                                }
                                                                                        }
                                                                                }
                                                                        }
                                                                }
                                                        }
                                                        <span class="keywordflow">if</span>(list.Count) {
                                                                <span class="keywordtype">int</span> rnd = ScenarioClass::Instance-&gt;Random.RandomRanged(0, list.Count - 1);
                                                                Cell = list.GetItem(rnd)-&gt;GetCell()-&gt;MapCoords;
                                                                LaunchSW(&amp;Cell);
                                                        }
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496ad436479cd46c9b1c67047f707d0f2799">SuperWeaponAITargetingMode::Base</a>:
                                                {
                                                        <span class="comment">// fire at the SW&#39;s owner&#39;s base cell</span>
                                                        Cell = pThis-&gt;Base_Center();
                                                        LaunchSW(&amp;Cell);
                                                        <span class="keywordflow">break</span>;
                                                }

                                        <span class="keywordflow">case</span> <a class="code" href="class_super_weapon_a_i_targeting_mode.html#aff7b028fe02e10a5c555e25357355496a290622e42b87cf24857b25b3c1614474">SuperWeaponAITargetingMode::Self</a>:
                                                {
                                                        <span class="comment">// find the first building providing pSuper</span>
                                                        SuperWeaponTypeClass *pType = pSuper-&gt;Type;
                                                        BuildingClass *pBld = NULL;
                                                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;BuildingTypeClass::Array-&gt;Count; ++j) {
                                                                BuildingTypeClass *pTBld = BuildingTypeClass::Array-&gt;GetItem(j);
                                                                <span class="keywordflow">if</span>((pTBld-&gt;SuperWeapon == pType-&gt;ArrayIndex) || (pTBld-&gt;SuperWeapon2 == pType-&gt;ArrayIndex)) {
                                                                        <span class="keywordflow">if</span>((pBld = pThis-&gt;FindBuildingOfType(pTBld-&gt;ArrayIndex, -1)) != NULL) {
                                                                                <span class="keywordflow">break</span>;
                                                                        }
                                                                }
                                                        }
                                                        <span class="keywordflow">if</span>(pBld) {
                                                                Cell = pBld-&gt;GetCell()-&gt;MapCoords;
                                                                LaunchSW(&amp;Cell);
                                                        }

                                                        <span class="keywordflow">break</span>;
                                                }
                                        }
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> 0x509AE7;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa773f34939d43e47dcf24ffe26e90fc3"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aa773f34939d43e47dcf24ffe26e90fc3" args="(6CC2B0, SuperClass_NameReadiness, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CC2B0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_NameReadiness&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                 {
        GET(SuperClass*, pThis, ECX);
        SuperWeaponTypeClass *pSW = pThis-&gt;Type;
        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSW);

        <span class="comment">// complete rewrite of this method.</span>

        <span class="keywordtype">char</span>* key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a21401a328ab6db8f6451ce943da5ea55">Text_Preparing</a>;
        <span class="keywordflow">if</span>(pThis-&gt;IsOnHold) {
                <span class="comment">// on hold</span>
                key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a065d3753fa4dfcf008fc14e1dfb502df">Text_Hold</a>;
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">if</span>(pThis-&gt;Type-&gt;UseChargeDrain) {
                        <span class="keywordflow">switch</span>(pThis-&gt;ChargeDrainState) {
                        <span class="keywordflow">case</span> 0:
                                <span class="comment">// still charging</span>
                                key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a1e114269f9c57275207284efb2ae34cf">Text_Charging</a>;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> 1:
                                <span class="comment">// ready</span>
                                key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a23c36ccd41fc797f11476212cc75c791">Text_Ready</a>;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> 2:
                                <span class="comment">// currently active</span>
                                key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a59f02aae0f5fb55f4c9f677b968325cf">Text_Active</a>;
                                <span class="keywordflow">break</span>;
                        }

                } <span class="keywordflow">else</span> {
                        <span class="comment">// ready</span>
                        <span class="keywordflow">if</span>(pThis-&gt;IsCharged) {
                                key = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a23c36ccd41fc797f11476212cc75c791">Text_Ready</a>;
                        }
                }
        }

        <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* text = NULL;
        <span class="keywordflow">if</span>(key &amp;&amp; *key) {
                text = StringTable::LoadStringA(key);
                <span class="keywordflow">if</span>(text &amp;&amp; !*text) {
                        text = NULL;
                }
        }
        R-&gt;EAX(text);
        <span class="keywordflow">return</span> 0x6CC352;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae1945ac375cae57bf281f870d3932952"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae1945ac375cae57bf281f870d3932952" args="(4FAE72, HouseClass_SWFire_PreDependent, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4FAE72&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass_SWFire_PreDependent&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(HouseClass*, pThis, EBX);

        <span class="comment">// find the predependent SW. decouple this from the chronosphere.</span>
        <span class="comment">// don&#39;t use a fixed SW type but the very one acutually fired last.</span>
        SuperClass* pSource = NULL;
        <span class="keywordflow">if</span>(<a class="code" href="class_house_ext_1_1_ext_data.html">HouseExt::ExtData</a> *pExt = <a class="code" href="class_house_ext.html#a4a73e500fabd21a7359c5247c31d4c03">HouseExt::ExtMap</a>.Find(pThis)) {
                <span class="keywordflow">if</span>(pThis-&gt;Supers.ValidIndex(pExt-&gt;SWLastIndex)) {
                        pSource = pThis-&gt;Supers.GetItem(pExt-&gt;SWLastIndex);
                }
        }

        R-&gt;ESI(pSource);

        <span class="keywordflow">return</span> 0x4FAE7B;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb595e9d5e90ebf693149bee9d9d125a"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="acb595e9d5e90ebf693149bee9d9d125a" args="(4576BA, BuildingClass_SW2Available, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4576BA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_SW2Available&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, Structure, ESI);
        GET(BuildingTypeClass *, AuxBuilding, EAX);
        <span class="keywordflow">return</span> Structure-&gt;Owner-&gt;CountOwnedAndPresent(AuxBuilding) &gt; 0
                ? 0x4576DB
                : 0x4576D6
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a19271ae61f0110dc178287aef714dfcc"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a19271ae61f0110dc178287aef714dfcc" args="(45765A, BuildingClass_SWAvailable, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">45765A&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_SWAvailable&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, Structure, ESI);
        GET(BuildingTypeClass *, AuxBuilding, EAX);
        <span class="keywordflow">return</span> Structure-&gt;Owner-&gt;CountOwnedAndPresent(AuxBuilding) &gt; 0
                ? 0x45767B
                : 0x457676
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a65de78360a67455f25dad7eb2c0e1ab0"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a65de78360a67455f25dad7eb2c0e1ab0" args="(44691B, BuildingClass_4DC_SWAvailable, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44691B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_4DC_SWAvailable&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, Structure, EBP);
        GET(BuildingTypeClass *, AuxBuilding, EAX);
        <span class="keywordflow">return</span> Structure-&gt;Owner-&gt;CountOwnedAndPresent(AuxBuilding) &gt; 0
                ? 0x446937
                : 0x44699A
        ;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae753ad9444b47427a03fdde0574fd27a"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae753ad9444b47427a03fdde0574fd27a" args="(6CC390, SuperClass_Launch, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CC390&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_Launch&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(SuperClass *, pSuper, ECX);
        GET_STACK(CellStruct*, pCoords, 0x4);
        GET_STACK(byte, IsPlayer, 0x8);

        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSuper-&gt;Type);

        Debug::Log(<span class="stringliteral">&quot;[LAUNCH] %s\n&quot;</span>, pSuper-&gt;Type-&gt;ID);

        <span class="keywordtype">bool</span> handled = <span class="keyword">false</span>;
        <span class="keywordflow">if</span>(<a class="code" href="class_new_s_w_type.html">NewSWType</a>* pNSW = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aca67fd8fe31d1b5c1157c3075f8d2323">GetNewSWType</a>()) {
                handled = <a class="code" href="class_s_w_type_ext.html#a4245415726f8e57a125a12100e6bc281">SWTypeExt::Launch</a>(pSuper, pNSW, pCoords, IsPlayer);
        }

        <span class="keywordflow">return</span> handled ? 0x6CDE40 : 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae871ca022ed885e0fb0cf7b8e1032314"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae871ca022ed885e0fb0cf7b8e1032314" args="(6CBA9E, SuperClass_ClickFire_Abort, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CBA9E&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_ClickFire_Abort&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(SuperClass *, pSuper, ESI);
        SuperWeaponTypeClass* pType = pSuper-&gt;Type;
        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pType);

        GET_STACK(<span class="keywordtype">bool</span>, IsPlayer, 0x20);

        <span class="comment">// auto-abort if no money</span>
        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ae0befc7de00e455ff50792264b822652">Money_Amount</a> &lt; 0) {
                <span class="keywordflow">if</span>(pSuper-&gt;Owner-&gt;Available_Money() &lt; -pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ae0befc7de00e455ff50792264b822652">Money_Amount</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                        <span class="keywordflow">if</span>(pSuper-&gt;Owner == HouseClass::Player) {
                                VoxClass::PlayIndex(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#afc0d3684a85839de2d3a88340cbaf673">EVA_InsufficientFunds</a>);
                                pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a8838236f80a9fcf0ba9db675baf8ffab">Message_InsufficientFunds</a>, pSuper-&gt;Owner);
                        }
                        <span class="keywordflow">return</span> 0x6CBABF;
                }
        }

        <span class="comment">// can this super weapon fire now?</span>
        <span class="keywordflow">if</span>(<a class="code" href="class_new_s_w_type.html">NewSWType</a>* pNSW = pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aca67fd8fe31d1b5c1157c3075f8d2323">GetNewSWType</a>()) {
                <span class="keywordflow">if</span>(pNSW-&gt;AbortFire(pSuper, IsPlayer)) {
                        <span class="keywordflow">return</span> 0x6CBABF;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a342208e1364376c5792d090ef4b7397c"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a342208e1364376c5792d090ef4b7397c" args="(50CFAA, HouseClass_PickOffensiveSWTarget, 0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">50CFAA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass_PickOffensiveSWTarget&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        R-&gt;ESI(0);
        R-&gt;Stack8(0x13, 1);
        <span class="keywordflow">return</span> 0x50CFC9;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a22c31b854daa07ef35c3f0c2cfddfb59"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a22c31b854daa07ef35c3f0c2cfddfb59" args="(50B319, HouseClass_UpdateSWs_ShowCameo, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">50B319&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass_UpdateSWs_ShowCameo&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(HouseClass *, H, EBP);
        GET(<span class="keywordtype">int</span>, Index, EDI);
        SuperClass *Super = H-&gt;Supers.GetItem(Index);
        SuperWeaponTypeClass *pSW = Super-&gt;Type;

        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {
                <span class="keywordflow">if</span>(pData-&gt;SW_AutoFire.Get() &amp;&amp; !pData-&gt;SW_ShowCameo.Get()) {
                        <span class="keywordflow">return</span> 0x50B358;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7bc1cf7cc39055f8abf002677b907be8"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a7bc1cf7cc39055f8abf002677b907be8" args="(6CC0EA, SuperClass_AnnounceQuantity, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CC0EA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_AnnounceQuantity&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(SuperClass *, pThis, ESI);
        SuperWeaponTypeClass *pSW = pThis-&gt;Type;
        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSW);

        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a2830310a16ad9c3a6138a8748c5e518c">Message_Ready</a>, HouseClass::Player);

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a> != -1 || pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> != -1) {
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a> != -1) {
                        VoxClass::PlayIndex(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a>);
                }
                <span class="keywordflow">return</span> 0x6CC17E;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5ecf96cfea40d93a68b895a4aef48f1d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a5ecf96cfea40d93a68b895a4aef48f1d" args="(6CBDD7, SuperClass_AnnounceReady, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CBDD7&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperClass_AnnounceReady&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(SuperWeaponTypeClass *, pThis, EAX);
        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);

        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a2830310a16ad9c3a6138a8748c5e518c">Message_Ready</a>, HouseClass::Player);

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a> != -1 || pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> != -1) {
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a> != -1) {
                        VoxClass::PlayIndex(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a3b0e1210e2d131cf37214a0738b45946">EVA_Ready</a>);
                }
                <span class="keywordflow">return</span> 0x6CBE68;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa471e749d06a796449987748c54f854"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="afa471e749d06a796449987748c54f854" args="(446937, BuildingClass_AnnounceSW, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">446937&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_AnnounceSW&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, pBuild, EBP);
        <span class="keywordtype">int</span> swTIdx = pBuild-&gt;Type-&gt;SuperWeapon;
        <span class="keywordflow">if</span>(swTIdx == -1) {
                swTIdx = pBuild-&gt;Type-&gt;SuperWeapon2;
                <span class="keywordflow">if</span>(swTIdx == -1) {
                        <span class="keywordflow">return</span> 0x44699A;
                }
        }

        SuperWeaponTypeClass *pSW = SuperWeaponTypeClass::Array-&gt;GetItem(swTIdx);
        <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pSW);

        pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad0452c3cdf4cfa3a91a20a9ab6dbe767">PrintMessage</a>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#a8ff34d89b588da23d158793cee342d09">Message_Detected</a>, pBuild-&gt;Owner);

        <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa7fb9c7a80fbb6daedfe060229bae450">EVA_Detected</a> != -1 || pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> != -1) {
                <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa7fb9c7a80fbb6daedfe060229bae450">EVA_Detected</a> != -1) {
                        VoxClass::PlayIndex(pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa7fb9c7a80fbb6daedfe060229bae450">EVA_Detected</a>);
                }
                <span class="keywordflow">return</span> 0x44699A;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ada70becba69df99dd2f16e07e16e83ad"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ada70becba69df99dd2f16e07e16e83ad" args="(451132, BuildingClass_ProcessAnims2, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">451132&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_ProcessAnims2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> 0x451145;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a84da89bc214c91f2e7c0ad9a4a8c385f"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a84da89bc214c91f2e7c0ad9a4a8c385f" args="(45100A, BuildingClass_ProcessAnims1, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">45100A&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_ProcessAnims1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, pBuild, ESI);
        GET(HouseClass *, pHouse, EAX);
        <span class="keywordtype">int</span> swTIdx = pBuild-&gt;Type-&gt;SuperWeapon;
        <span class="keywordflow">if</span>(swTIdx == -1) {
                swTIdx = pBuild-&gt;Type-&gt;SuperWeapon2;
                <span class="keywordflow">if</span>(swTIdx == -1) {
                        <span class="keywordflow">return</span> 0x451145;
                }
        }

        R-&gt;EDI(pBuild-&gt;Type);
        R-&gt;EAX(pHouse-&gt;Supers.GetItem(swTIdx));
        <span class="keywordflow">return</span> 0x451030;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd531e440f36070b6ea663462f0786fa"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="acd531e440f36070b6ea663462f0786fa" args="(44656D, BuildingClass_Place2, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">44656D&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Place2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> 0x446580;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1d493727ad7f450573b37d17d497e5c"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ac1d493727ad7f450573b37d17d497e5c" args="(446418, BuildingClass_Place1, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">446418&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Place1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(BuildingClass *, pBuild, EBP);
        GET(HouseClass *, pHouse, EAX);
        <span class="keywordtype">int</span> swTIdx = pBuild-&gt;Type-&gt;SuperWeapon;
        <span class="keywordflow">if</span>(swTIdx == -1) {
                swTIdx = pBuild-&gt;Type-&gt;SuperWeapon2;
                <span class="keywordflow">if</span>(swTIdx == -1) {
                        <span class="keywordflow">return</span> 0x446580;
                }
        }

        R-&gt;EAX(pHouse-&gt;Supers.GetItem(swTIdx));
        <span class="keywordflow">return</span> 0x44643E;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a455e859bd40b9165bffa91fa7da563ea"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a455e859bd40b9165bffa91fa7da563ea" args="(4AC20C, DisplayClass_LMBUp, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4AC20C&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DisplayClass_LMBUp&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">int</span> Action = R-&gt;Stack32(0x9C);
        <span class="keywordflow">if</span>(Action &lt; <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>) {
                <span class="comment">// get the actual firing SW type instead of just the first type of the</span>
                <span class="comment">// requested action. this allows clones to work for legacy SWs (the new</span>
                <span class="comment">// ones use SW_*_CURSORs). we have to check that the action matches the</span>
                <span class="comment">// action of the found type as the no-cursor represents a different</span>
                <span class="comment">// action and we don&#39;t want to start a force shield even tough the UI</span>
                <span class="comment">// says no.</span>
                SuperWeaponTypeClass * pSW = NULL;
                <span class="keywordflow">if</span>(SuperWeaponTypeClass::Array-&gt;ValidIndex(Unsorted::CurrentSWType)) {
                        pSW = SuperWeaponTypeClass::Array-&gt;GetItem(Unsorted::CurrentSWType);
                        <span class="keywordflow">if</span>(pSW &amp;&amp; (pSW-&gt;Action != Action)) {
                                pSW = NULL;
                        }
                }

                R-&gt;EAX(pSW);
                <span class="keywordflow">return</span> pSW ? 0x4AC21C : 0x4AC294;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Action == <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>) {
                R-&gt;EAX(0);
                <span class="keywordflow">return</span> 0x4AC294;
        }

        R-&gt;EAX(<a class="code" href="class_s_w_type_ext.html#a37987e17a568804f2f22d1bdd9e2e8d5">SWTypeExt::CurrentSWType</a>);
        <span class="keywordflow">return</span> 0x4AC21C;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f6cd4c86688c420bbb30f335258c7f6"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a5f6cd4c86688c420bbb30f335258c7f6" args="(6CEE96, SuperWeaponTypeClass_GetTypeIndex, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6CEE96&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SuperWeaponTypeClass_GetTypeIndex&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        GET(<span class="keyword">const</span> <span class="keywordtype">char</span> *, TypeStr, EDI);
        <span class="keywordtype">int</span> customType = <a class="code" href="class_new_s_w_type.html#a6f6659b52c8a26c8e83340cdfbef43f9">NewSWType::FindIndex</a>(TypeStr);
        <span class="keywordflow">if</span>(customType &gt; -1) {
                R-&gt;ESI(customType);
                <span class="keywordflow">return</span> 0x6CEE9C;
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa1157d7ef960006eebfab36fed738ac8"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aa1157d7ef960006eebfab36fed738ac8" args="(6A932B, CameoClass_GetTip_MoneySW, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6A932B&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CameoClass_GetTip_MoneySW&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                  {
        GET(SuperWeaponTypeClass*, pSW, EAX);

        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSW)) {
                <span class="keywordflow">if</span>(pData-&gt;Money_Amount &lt; 0) {
                        <span class="keywordtype">wchar_t</span>* pTip = (<span class="keywordtype">wchar_t</span>*)0xB07BC4;

                        <span class="comment">// account for no-name SWs</span>
                        <span class="keywordflow">if</span>(*(byte*)0x884B8C || !wcslen(pSW-&gt;UIName)) {
                                <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* pFormat = StringTable::LoadStringA(<span class="stringliteral">&quot;TXT_MONEY_FORMAT_1&quot;</span>);
                                swprintf(pTip, 0x20, pFormat, -pData-&gt;Money_Amount.Get());
                        } <span class="keywordflow">else</span> {
                                <span class="comment">// then, this must be brand SWs</span>
                                <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* pFormat = StringTable::LoadStringA(<span class="stringliteral">&quot;TXT_MONEY_FORMAT_2&quot;</span>);
                                swprintf(pTip, 0x20, pFormat, pSW-&gt;UIName, -pData-&gt;Money_Amount.Get());
                        }

                        <span class="comment">// replace space by new line</span>
                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=wcslen(pTip); i&gt;=0; --i) {
                                <span class="keywordflow">if</span>(pTip[i] == 0x20) {
                                        pTip[i] = 0xA;
                                        <span class="keywordflow">break</span>;
                                }
                        }

                        <span class="comment">// put it there</span>
                        R-&gt;EAX(pTip);
                        <span class="keywordflow">return</span> 0x6A93E5;
                }
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7522be5b68ce0eac217e656ed47e7766"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a7522be5b68ce0eac217e656ed47e7766" args="(6AAEDF, SidebarClass_ProcessCameoClick_SuperWeapons, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6AAEDF&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SidebarClass_ProcessCameoClick_SuperWeapons&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                    {
        GET(<span class="keywordtype">int</span>, idxSW, ESI);
        SuperClass* pSuper = HouseClass::Player-&gt;Supers.GetItem(idxSW);

        <span class="keywordflow">if</span>(<a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a>* pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.Find(pSuper-&gt;Type)) {
                <span class="comment">// if this SW is only auto-firable, discard any clicks.</span>
                <span class="comment">// if AutoFire is off, the sw would not be firable at all,</span>
                <span class="comment">// thus we ignore the setting in that case.</span>
                <span class="keywordtype">bool</span> manual = !pData-&gt;SW_ManualFire.Get() &amp;&amp; pData-&gt;SW_AutoFire.Get();
                <span class="keywordtype">bool</span> unstoppable = pSuper-&gt;Type-&gt;UseChargeDrain &amp;&amp; pSuper-&gt;ChargeDrainState == 2
                        &amp;&amp; pData-&gt;SW_Unstoppable.Get();

                <span class="comment">// play impatient voice, if this isn&#39;t charged yet</span>
                <span class="keywordflow">if</span>(!pSuper-&gt;CanFire() &amp;&amp; !manual) {
                        VoxClass::PlayIndex(pData-&gt;EVA_Impatient);
                        <span class="keywordflow">return</span> 0x6AAFB1;
                }

                <span class="comment">// prevent firing the SW if the player doesn&#39;t have sufficient</span>
                <span class="comment">// funds. play an EVA message in that case.</span>
                <span class="keywordflow">if</span>(pData-&gt;Money_Amount &lt; 0) {
                        <span class="keywordflow">if</span>(HouseClass::Player-&gt;Available_Money() &lt; -pData-&gt;Money_Amount.Get()) {
                                VoxClass::PlayIndex(pData-&gt;EVA_InsufficientFunds);
                                pData-&gt;PrintMessage(pData-&gt;Message_InsufficientFunds, HouseClass::Player);
                                <span class="keywordflow">return</span> 0x6AAFB1;
                        }
                }
                
                <span class="comment">// disallow manuals and active unstoppables</span>
                <span class="keywordflow">if</span>(manual || unstoppable) {
                        <span class="keywordflow">return</span> 0x6AAFB1;
                }

                <span class="keywordflow">return</span> 0x6AAEF7;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3eea3304ed985d38c256286aabe7b0f3"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a3eea3304ed985d38c256286aabe7b0f3" args="(653B3A, RadarClass_GetMouseAction_CustomSWAction, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">653B3A&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RadarClass_GetMouseAction_CustomSWAction&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">int</span> idxSWType = Unsorted::CurrentSWType;
        <span class="keywordflow">if</span>(idxSWType &gt; -1) {
                GET_STACK(byte, EventFlags, 0x58);

                MouseEvent::Value E(EventFlags);
                <span class="keywordflow">if</span>(E &amp; (MouseEvent::RightDown | MouseEvent::RightUp)) {
                        <span class="keywordflow">return</span> 0x653D6F;
                }

                SuperWeaponTypeClass *pThis = SuperWeaponTypeClass::Array-&gt;GetItem(idxSWType);
                <a class="code" href="class_s_w_type_ext_1_1_ext_data.html">SWTypeExt::ExtData</a> *pData = <a class="code" href="class_s_w_type_ext.html#a6906468c9e4ae4d421cba9cb572fb6ec">SWTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);
                <span class="keywordtype">int</span> type = (pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> &gt; -1) ? pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ad19024f2b5419a91b472362a219aecfc">HandledByNewSWType</a> : pThis-&gt;Type;
                <span class="keywordtype">bool</span> customType = (type &gt;= <a class="code" href="_s_w_type_2_body_8h.html#a6ad9458fa6e603ce35865007ed97f044">FIRST_SW_TYPE</a>);

                <span class="keywordflow">if</span>((pThis-&gt;Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) || customType) {
                        GET_STACK(CellStruct, pMapCoords, STACK_OFFS(0x54, 0x3C));

                        <span class="keywordtype">int</span> Action = <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>;

                        <span class="comment">// prevent firing into shroud</span>
                        <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
                                CellClass* pCell = MapClass::Instance-&gt;GetCellAt(&amp;pMapCoords);
                                CoordStruct Crd;

                                <span class="keywordflow">if</span>(MapClass::Instance-&gt;IsLocationShrouded(pCell-&gt;GetCoords(&amp;Crd))) {
                                        Action = <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>;
                                }
                        }

                        <span class="comment">// new SW types have to check whether the coordinates are valid.</span>
                        <span class="keywordflow">if</span>(Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) {
                                <span class="keywordflow">if</span>(customType &amp;&amp; !<a class="code" href="class_new_s_w_type.html#a6d958ce28c85b64691c52b374eec1bd3">NewSWType::GetNthItem</a>(type)-&gt;<a class="code" href="class_new_s_w_type.html#a7143e214b7e1f6f900c02d40e3c42134">CanFireAt</a>(pData, &amp;pMapCoords)) {
                                        Action = <a class="code" href="_actions_8h.html#afa2feb19e38b31961682b03924731bcf">SW_NO_CURSOR</a>;
                                }
                        }

                        R-&gt;ESI(Action);

                        <span class="keywordflow">if</span>(Action == <a class="code" href="_actions_8h.html#a3828d4bdcec55d055849f3503ab93410">SW_YES_CURSOR</a>) {
                                <a class="code" href="class_s_w_type_ext.html#a37987e17a568804f2f22d1bdd9e2e8d5">SWTypeExt::CurrentSWType</a> = pThis;
                                <a class="code" href="class_actions.html#a85baf38edafaf94b1ac44b03fe01f132">Actions::Set</a>(&amp;pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#ac4760afdbaf32db2541c4b10a4102f5e">SW_Cursor</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>());
                        } <span class="keywordflow">else</span> {
                                <a class="code" href="class_s_w_type_ext.html#a37987e17a568804f2f22d1bdd9e2e8d5">SWTypeExt::CurrentSWType</a> = NULL;
                                <a class="code" href="class_actions.html#a85baf38edafaf94b1ac44b03fe01f132">Actions::Set</a>(&amp;pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#aa13c3ad838bb5f0785652587966461c7">SW_NoCursor</a>, pData-&gt;<a class="code" href="class_s_w_type_ext_1_1_ext_data.html#adf5b9fa3c1a14e98d304a9108263b5d9">SW_FireToShroud</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>());
                        }
                        <span class="keywordflow">return</span> 0x653CA3;
                }
        }
        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 17 2011 23:42:31 for Ares by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
